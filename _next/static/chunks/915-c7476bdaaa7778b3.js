"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{17772:function(e,l,a){a.d(l,{Z:function(){return E}});var s=a(85893),t=a(67294),i=a(61953),n=a(79072),r=a(55343),o=a(14398),u=a(67836),c=a(80562),d=a(75084),m=a(21609),h=a(58316),g=a(53442),x=a(86378);let v=[{label:"0 ~ 17",value:"0-17"},{label:"18 ~ 24",value:"18-24"},{label:"25 ~ 34",value:"25-34"},{label:"35 ~ 50",value:"35-50"},{label:"51 ~ 70",value:"51-70"}],p=e=>{let{index:l,value:a,isInvalid:t,onChange:i}=e;return(0,s.jsxs)(r.Z,{fullWidth:!0,children:[(0,s.jsx)(h.Z,{size:"small",error:t&&(0===a.length||""===a[0]),children:"Age Ranges"}),(0,s.jsx)(g.Z,{size:"small",label:"Age Ranges",value:a.length?a[0]:"",onChange:e=>i(l,"items",[e.target.value]),error:t&&(0===a.length||""===a[0]),children:v.map(e=>(0,s.jsx)(x.Z,{value:e.value,children:e.label},e.value))})]})},b=e=>{let{index:l,value:a,isInvalid:t,onChange:i}=e;return(0,s.jsx)(r.Z,{fullWidth:!0,children:(0,s.jsx)(u.Z,{label:"Audience ID",size:"small",value:a.length?a[0]:"",onChange:e=>i(l,"items",[e.target.value]),error:t&&(0===a.length||""===a[0])})})},f=[{label:"Android",value:"Android"},{label:"iOS",value:"iOS"},{label:"Windows",value:"Windows"}],j=e=>{let{index:l,value:a,isInvalid:t,onChange:i}=e;return(0,s.jsxs)(r.Z,{fullWidth:!0,children:[(0,s.jsx)(h.Z,{size:"small",error:t&&(0===a.length||""===a[0]),children:"Device OS"}),(0,s.jsx)(g.Z,{label:"Device OS",size:"small",value:a.length?a[0]:"",onChange:e=>i(l,"items",[e.target.value]),error:t&&(0===a.length||""===a[0]),children:f.map(e=>(0,s.jsx)(x.Z,{value:e.value,children:e.label},e.value))})]})},y=[{label:"Male",value:"male"},{label:"Female",value:"female"}],Z=e=>{let{index:l,value:a,isInvalid:t,onChange:i}=e;return(0,s.jsxs)(r.Z,{fullWidth:!0,children:[(0,s.jsx)(h.Z,{size:"small",error:t&&(0===a.length||""===a[0]),children:"Gender"}),(0,s.jsx)(g.Z,{label:"Gender",size:"small",value:a.length?a[0]:"",onChange:e=>i(l,"items",[e.target.value]),error:t&&(0===a.length||""===a[0]),children:y.map(e=>(0,s.jsx)(x.Z,{value:e.value,children:e.label},e.value))})]})};var k=a(97043),C=a(17984),_=a(87725);let S=e=>{let{index:l,value:a,isInvalid:i,onChange:c}=e,[d,m]=(0,t.useState)(null),[h,g]=(0,t.useState)(null),[x,v]=(0,t.useState)(null),p=(0,t.useMemo)(()=>[k.Z.getCountryByCode("US")],[]),b=(0,t.useMemo)(()=>d?C.ZP.getStatesOfCountry(d.isoCode):C.ZP.getStatesOfCountry("US"),[d]),f=(0,t.useMemo)(()=>d&&h?_.Z.getCitiesOfState(d.isoCode,h.isoCode):[],[d,h]);return(0,t.useEffect)(()=>{c(l,"items",[d?d.isoCode:"",h?h.isoCode:"",x?x.name:""])},[d,h,x]),(0,s.jsxs)(n.ZP,{container:!0,spacing:3,children:[(0,s.jsx)(n.ZP,{item:!0,xs:12,md:4,children:(0,s.jsx)(r.Z,{fullWidth:!0,children:(0,s.jsx)(o.Z,{size:"small",options:p,getOptionLabel:e=>e.name,renderInput:e=>(0,s.jsx)(u.Z,{label:"Country",size:"small",error:i&&null===d,...e}),onChange:(e,l)=>m(l)})})}),(0,s.jsx)(n.ZP,{item:!0,xs:12,md:4,children:(0,s.jsx)(r.Z,{fullWidth:!0,children:(0,s.jsx)(o.Z,{size:"small",options:b,getOptionLabel:e=>e.name,renderInput:e=>(0,s.jsx)(u.Z,{label:"Region",size:"small",error:i&&null===h,...e}),onChange:(e,l)=>g(l)})})}),(0,s.jsx)(n.ZP,{item:!0,xs:12,md:4,children:(0,s.jsx)(r.Z,{fullWidth:!0,children:(0,s.jsx)(o.Z,{size:"small",options:f,getOptionLabel:e=>e.name,renderInput:e=>(0,s.jsx)(u.Z,{label:"City",size:"small",error:i&&null===x,...e}),onChange:(e,l)=>v(l)})})})]})},w=[{label:"Facebook Feed",value:"facebook_feed"},{label:"Facebook Marketplace",value:"facebook_marketplace"},{label:"Facebook Video feeds",value:"facebook_suggested_video"},{label:"Facebook right column",value:"facebook_right_hand_column"},{label:"Facebook Business Explore",value:"facebook_biz_disco_feed"},{label:"Instagram Profile Feed",value:"instagram_profile_feed"},{label:"Instagram Explore",value:"instagram_explore"},{label:"Instagram Explore home",value:"instagram_explore_home"},{label:"Instagram Stories",value:"instagram_story"},{label:"Facebook Stories",value:"facebook_story"},{label:"Instagram Reels",value:"instagram_reels"},{label:"Facebook Reels",value:"facebook_facebook_reels"},{label:"Facebook in-stream videos",value:"facebook_instream_video"},{label:"Ads on Facebook Reels",value:"facebook_facebook_reels_overlay"},{label:"Facebook search results",value:"facebook_search"},{label:"Instagram search results",value:"instagram_ig_search"},{label:"Audience Network native, banner and interstitial",value:" audience_network_classic"},{label:"Audience Network rewarded videos",value:"audience_network_rewarded_video"}],z=e=>{let{index:l,value:a,isInvalid:t,onChange:i}=e;return(0,s.jsxs)(r.Z,{fullWidth:!0,children:[(0,s.jsx)(h.Z,{size:"small",error:t&&(0===a.length||""===a[0]),children:"Position Type"}),(0,s.jsx)(g.Z,{size:"small",label:"Position Type",value:a.length?a[0]:"",onChange:e=>i(l,"items",[e.target.value]),error:t&&(0===a.length||""===a[0]),children:w.map(e=>(0,s.jsx)(x.Z,{value:e.value,children:e.label},e.value))})]})},P=[{label:"Facebook",value:"facebook"},{label:"Instagram",value:"instagram"},{label:"Audience Network",value:"audience_network"},{label:"Messenger",value:"messenger"}],A=e=>{let{index:l,value:a,isInvalid:t,onChange:i}=e;return(0,s.jsxs)(r.Z,{fullWidth:!0,children:[(0,s.jsx)(h.Z,{size:"small",error:t&&(0===a.length||""===a[0]),children:"Publisher Platform"}),(0,s.jsx)(g.Z,{label:"Publisher Platform",size:"small",value:a.length?a[0]:"",onChange:e=>i(l,"items",[e.target.value]),error:t&&(0===a.length||""===a[0]),children:P.map(e=>(0,s.jsx)(x.Z,{value:e.value,children:e.label},e.value))})]})},I=[{label:"iPhone",value:"iPhone"},{label:"iPad",value:"iPad"}],O=e=>{let{index:l,value:a,isInvalid:t,onChange:i}=e;return(0,s.jsxs)(r.Z,{fullWidth:!0,children:[(0,s.jsx)(h.Z,{size:"small",children:"User Device"}),(0,s.jsx)(g.Z,{size:"small",label:"User Device",value:a.length?a[0]:"",onChange:e=>i(l,"items",[e.target.value]),error:t&&(0===a.length||""===a[0]),children:I.map(e=>(0,s.jsx)(x.Z,{value:e.value,children:e.label},e.value))})]})},W=e=>{let{category:l}=e;switch(l.key){case"age":default:return(0,s.jsx)(p,{...e});case"custom_audience":return(0,s.jsx)(b,{...e});case"user_os":return(0,s.jsx)(j,{...e});case"gender":return(0,s.jsx)(Z,{...e});case"home_location":return(0,s.jsx)(S,{...e});case"position_type":return(0,s.jsx)(z,{...e});case"publisher_platform":return(0,s.jsx)(A,{...e});case"user_device":return(0,s.jsx)(O,{...e});case"days":return(0,s.jsx)(DaysClassDropdown,{...e})}},D=e=>{let{value:l=[],isInvalid:a,categories:h=[],level:g=0,onChange:x}=e,[v,p]=(0,t.useState)(l.length>0?l:[{category:null,items:[],value:"",subCategories:[]}]);(0,t.useEffect)(()=>{p(l.length>0?l:[{category:null,items:[],value:"",subCategories:[]}])},[l]);let b=e=>!(0===e.length||e.some(e=>""===e)),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;p([...v,{category:e,items:[],value:"",subCategories:[]}])},j=(e,l,a)=>{let s=[...v];s[e][l]=a,p(s),x(s)},y=e=>{let l=[...v];l[e].subCategories.length?l[e].subCategories.push({category:l[e].subCategories[0].category,items:[],value:"",subCategories:[]}):l[e].subCategories.push({category:null,items:[],value:"",subCategories:[]}),p(l),x(l)},Z=e=>{let l=[...v];l.splice(e,1),0===g&&0===l.length?(p([{category:null,items:[],value:"",subCategories:[]}]),x([{category:null,items:[],value:"",subCategories:[]}])):(p(l),x(l))};return(0,s.jsx)(i.Z,{children:v.map((e,l)=>{var k;return(0,s.jsxs)(i.Z,{sx:{pb:4},children:[(0,s.jsxs)(n.ZP,{container:!0,columnSpacing:3,children:[(0,s.jsx)(n.ZP,{item:!0,xs:12,sm:5,lg:5,children:(0,s.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",gap:4,mb:e.category&&4},children:[g>0&&(0,s.jsx)(i.Z,{sx:{ml:(g-1)*10},children:(0,s.jsx)(m.Z,{icon:"ph:arrow-elbow-down-right-bold"})}),(0,s.jsx)(r.Z,{fullWidth:!0,children:(0,s.jsx)(o.Z,{size:"small",value:e.category,options:h,getOptionLabel:e=>e.label,disabled:0!==l,renderInput:l=>(0,s.jsx)(u.Z,{label:"Category",size:"small",...l,error:a&&null===e.category}),onChange(e,l){v.forEach((e,a)=>{j(a,"category",l)})}})})]})}),e.category&&(0,s.jsxs)(t.Fragment,{children:[(0,s.jsx)(n.ZP,{item:!0,xs:12,sm:e.subCategories.length>0?6:4,lg:e.subCategories.length>0?6.5:5,children:(0,s.jsx)(W,{index:l,category:e.category,value:e.items,isInvalid:a,onChange:j})}),0===e.subCategories.length&&(0,s.jsx)(n.ZP,{item:!0,xs:12,sm:2,lg:1.5,children:(0,s.jsx)(r.Z,{fullWidth:!0,children:(0,s.jsx)(u.Z,{size:"small",value:e.value,type:"number",inputProps:{step:.01,max:1,min:0},onChange:e=>j(l,"value",e.target.value),disabled:e.subCategories.length>0,error:a&&""===e.value&&0===e.subCategories.length})})}),(0,s.jsx)(n.ZP,{item:!0,xs:12,sm:1,lg:.5,children:(0,s.jsx)(c.Z,{onClick:()=>Z(l),children:(0,s.jsx)(m.Z,{icon:"mdi:trash"})})})]})]}),e.subCategories.length>0&&h.length>0&&(0,s.jsx)(D,{value:e.subCategories,isInvalid:a,categories:h.filter(l=>l!==e.category),onChange(e){let a=[...v];a[l].subCategories=e,p(a),x(a)},level:g+1}),e.category&&b(e.items)&&(0,s.jsxs)(i.Z,{sx:{display:"flex",gap:3,ml:10*g},children:[l===v.length-1&&(0,s.jsxs)(d.Z,{variant:"outlined",startIcon:(0,s.jsx)(m.Z,{icon:"mdi:plus"}),sx:{textTransform:"capitalize"},onClick:()=>f(e.category),children:["Add Same ",null==e?void 0:null===(k=e.category)||void 0===k?void 0:k.label]}),h.length>1&&(0,s.jsx)(d.Z,{variant:"outlined",startIcon:(0,s.jsx)(m.Z,{icon:"ph:arrow-elbow-down-right-bold"}),sx:{textTransform:"capitalize"},onClick:()=>y(l),children:"Add Sub Category"})]})]},l)})})};var E=D},57332:function(e,l,a){var s=a(85893),t=a(67294),i=a(1890),n=a(77745),r=a(61953),o=a(67836),u=a(14398),c=a(29630),d=a(80562),m=a(95398),h=a(76779),g=a(75084),x=a(70754),v=a(51514),p=a(21609),b=a(17772),f=a(50196),j=a(78065),y=a(15949);let Z=[{label:"Age",key:"age"},{label:"Audience",key:"custom_audience"},{label:"User OS",key:"user_os"},{label:"Gender",key:"gender"},{label:"Publisher Platform",key:"publisher_platform"},{label:"Position Type",key:"position_type"},{label:"User Device",key:"user_device"}],k=e=>{let{id:l,open:a,account:k,campaign:C,onInit:_,onClose:S}=e,{settings:w}=(0,v.r)(),[z,P]=(0,t.useState)(!1),[A,I]=(0,t.useState)([]),[O,W]=(0,t.useState)(null),[D,E]=(0,t.useState)(1),[F,T]=(0,t.useState)([{category:null,items:[],value:"",subCategories:[]}]),[M,N]=(0,t.useState)({}),[R,U]=(0,t.useState)(!1),V=(0,t.useCallback)(async()=>{if(a&&C){let{data:e}=await f.ZP.get("https://graph.facebook.com/v22.0/".concat(C.id,"/adsets"),{params:{fields:"name",access_token:w.facebookApiKey,limit:1e3}});e.data&&(I(e.data),W(e.data.find(e=>e.id===l)))}},[a,C]),K=(0,t.useCallback)(async()=>{if(a){var e,s,t,i,n,r;try{let{data:o}=await f.ZP.get("https://graph.facebook.com/v22.0/".concat(l),{params:{fields:"account_id,campaign_id,bid_adjustments",access_token:w.facebookApiKey}});if(o){if(null==o?void 0:null===(e=o.bid_adjustments)||void 0===e?void 0:e.user_groups){let u=JSON.parse(null==o?void 0:null===(s=o.bid_adjustments)||void 0===s?void 0:s.user_groups);console.log("categories",u,null==o?void 0:null===(t=o.bid_adjustments)||void 0===t?void 0:t.user_groups);let c=Object.keys(u)[0];E((null===(i=u[c])||void 0===i?void 0:i.default)||1),delete u[c].default;let d=q(u);T(d),U(!1),N({})}else T([{category:null,items:[],value:"",subCategories:[]}]),U(!1),N({})}}catch(m){j.Am.error((null===(n=m.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.message)||m.message)}}},[a]),L=e=>!(0===e.length||e.some(e=>""===e)),B=e=>{let l=0;return e.length?e.forEach(e=>{l+=J(e)}):l+=1,l},J=e=>{let l=0;return e.subCategories&&e.subCategories.length>0?e.subCategories.forEach(e=>{l+=J(e)}):null!==e.category&&L(e.items)&&""!==e.value||(l+=1),l},G=(e,l)=>{let a={...e};for(let s in l)l.hasOwnProperty(s)&&("object"!=typeof l[s]||null===l[s]||Array.isArray(l[s])?a[s]=l[s]:a[s]=G(a[s]||{},l[s]));return a},H=e=>{let l=e.reduce((e,l)=>{let a=l.category.key,s=l.items,t=l.value,i=l.subCategories,n=i.length>0?H(i):t,r=s.reduceRight((e,l)=>({[l]:e}),n);return G(e,{[a]:r})},{});return l},q=e=>{let l=[];return Object.entries(e).forEach(e=>{let[a,s]=e;Object.entries(s).forEach(e=>{var s,t;let[i,n]=e;if("string"==typeof n||"number"==typeof n)l.push({category:{key:a,label:null===(s=Z.find(e=>e.key===a))||void 0===s?void 0:s.label},items:[i],value:n,subCategories:[]});else{let r=q(n);l.push({category:{key:a,label:null===(t=Z.find(e=>e.key===a))||void 0===t?void 0:t.label},items:[i],value:"",subCategories:r})}})}),l},Q=()=>{if(!B(F)){let e=H(F);e[Object.keys(e)[0]].default=D,N(e)}},X=async()=>{if(B(F)||null===O)U(!0);else try{P(!0),U(!1);let e=H(F);e[Object.keys(e)[0]].default=D,N(e),await f.ZP.post("https://graph.facebook.com/v21.0/".concat(O.id),{bid_adjustments:{user_groups:e},fields:"bid_adjustments",access_token:w.facebookApiKey}),delete e[Object.keys(e)[0]].default,j.Am.success("Successfully updated."),_(),S()}catch(s){var l,a;j.Am.error((null===(l=s.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.message)||s.message)}finally{P(!1)}};(0,t.useEffect)(()=>{V()},[V]),(0,t.useEffect)(()=>{K()},[K]);let Y=(0,y.D)({matchFrom:"any",stringify:e=>"".concat(e.name," ").concat(e.id)});return(0,s.jsxs)(i.Z,{fullWidth:!0,maxWidth:"xl",open:a,sx:{"& .MuiPaper-root":{maxWidth:1350}},children:[(0,s.jsxs)(n.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:["Edit Bid Multiplier",(0,s.jsxs)(r.Z,{sx:{display:"flex",flexWrap:"wrap",gap:3,alignItems:"center"},children:[(0,s.jsx)(o.Z,{label:"Account IDs",size:"small",value:null==k?void 0:k.name,disabled:!0}),(0,s.jsx)(o.Z,{label:"Campaign IDs",size:"small",value:null==C?void 0:C.name,disabled:!0}),(0,s.jsx)(u.Z,{options:A,sx:{width:"230px"},getOptionLabel:e=>e.name,renderInput:e=>(0,s.jsx)(o.Z,{...e,label:"Ad Set IDs",size:"small"}),renderOption:(e,l,a)=>(0,s.jsxs)(r.Z,{component:"li",...e,sx:{width:"100%",flexDirection:"column",alignItems:"flex-start !important",backgroundColor:a.inputValue==l.name?"f0f0f0":"#ffffff"},children:[(0,s.jsx)(c.Z,{children:l.name}),(0,s.jsx)(c.Z,{variant:"caption",children:l.id})]}),filterOptions:Y,value:O,onChange(e,l){W(l)}}),(0,s.jsx)(o.Z,{label:"Default Value",size:"small",type:"number",value:D,onChange(e){e.target.value>1?E(1):e.target.value<0?E(0):E(e.target.value)},inputProps:{step:.1,min:0,max:1},sx:{minWidth:120}}),(0,s.jsx)(d.Z,{size:"small",onClick:S,children:(0,s.jsx)(p.Z,{icon:"mdi:close"})})]})]}),(0,s.jsxs)(m.Z,{dividers:!0,children:[(0,s.jsx)(b.Z,{value:F,isInvalid:R,categories:Z,onChange:T}),Object.keys(M).length>0&&(0,s.jsx)(r.Z,{component:"pre",sx:{border:e=>"1px solid ".concat(e.palette.divider),p:3,my:0},children:JSON.stringify(M,null,2)})]}),(0,s.jsxs)(h.Z,{sx:{py:"1rem !important",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsx)(g.Z,{variant:"contained",onClick:Q,sx:{textTransform:"capitalize"},children:"View Result"}),(0,s.jsxs)(r.Z,{sx:{display:"flex",gap:3,alignItems:"center"},children:[(0,s.jsx)(g.Z,{variant:"contained",color:"primary",startIcon:z&&(0,s.jsx)(x.Z,{color:"inherit",size:16}),disabled:!!z||void 0,onClick:X,sx:{textTransform:"capitalize"},children:"Publish"}),(0,s.jsx)(g.Z,{variant:"contained",color:"error",onClick:S,sx:{textTransform:"capitalize"},children:"Cancel"})]})]})]})};l.Z=k},51533:function(e,l,a){a.d(l,{Z:function(){return O}});var s=a(85893),t=a(67294),i=a(1890),n=a(77745),r=a(61953),o=a(67836),u=a(14398),c=a(29630),d=a(55343),m=a(58316),h=a(53442),g=a(86378),x=a(80562),v=a(95398),p=a(76779),b=a(75084),f=a(70754),j=a(51514),y=a(21609),Z=a(17772),k=a(50196),C=a(5464),_=a(78065),S=a(44642);let w=e=>{let{open:l,onAgree:a,onClose:t}=e;return(0,s.jsxs)(i.Z,{fullWidth:!0,maxWidth:"sm",open:l,children:[(0,s.jsx)(n.Z,{sx:{pb:".5rem"},children:"A bid multiplier with the specified Ad Set ID already exists"}),(0,s.jsx)(v.Z,{children:(0,s.jsx)(S.Z,{children:"Would you like to proceed with updating the bid multiplier? Please note that this action will overwrite the existing details."})}),(0,s.jsxs)(p.Z,{children:[(0,s.jsx)(b.Z,{variant:"contained",sx:{textTransform:"capitalize"},onClick:a,children:"Agree"}),(0,s.jsx)(b.Z,{variant:"contained",color:"error",sx:{textTransform:"capitalize"},onClick:t,children:"Cancel"})]})]})};var z=a(15949);let P=[{label:"Age",key:"age"},{label:"Audience",key:"custom_audience"},{label:"User OS",key:"user_os"},{label:"Gender",key:"gender"},{label:"Publisher Platform",key:"publisher_platform"},{label:"Position Type",key:"position_type"},{label:"User Device",key:"user_device"}],A=[{name:"Sunday",value:"0"},{name:"Monday",value:"1"},{name:"Tuesday",value:"2"},{name:"Wednesday",value:"3"},{name:"Thursday",value:"4"},{name:"Friday",value:"5"},{name:"Saturday",value:"6"}],I=e=>{let{open:l,account:a,campaign:S,onInit:I,onClose:O}=e,{settings:W}=(0,j.r)(),[D,E]=(0,t.useState)(!1),[F,T]=(0,t.useState)([]),[M,N]=(0,t.useState)(null),[R,U]=(0,t.useState)(1),[V,K]=(0,t.useState)([{category:null,items:[],value:"",subCategories:[]}]),[L,B]=(0,t.useState)({}),[J,G]=(0,t.useState)(!1),[H,q]=(0,t.useState)(!1),[Q,X]=(0,t.useState)(new Date().getDay()),Y=(0,t.useCallback)(async()=>{if(a&&S&&M){let e={account:a.id,campaign:S.id,advertisement:M.id,day:Q,limit:100},{data:l}=await C.Z.get("/dimensions/getDefault",{params:e});l?U(null==l?void 0:l.value):U(1)}else U(1)},[M,Q]),$=(0,t.useCallback)(async()=>{if(S){let{data:e}=await k.ZP.get("https://graph.facebook.com/v22.0/".concat(S.id,"/adsets"),{params:{fields:"name",access_token:W.facebookApiKey,limit:1e3}});e.data.length&&(T(e.data),N(e.data[0]),Y())}},[S]),ee=e=>!(0===e.length||e.some(e=>""===e)),el=e=>{let l=0;return e.length?e.forEach(e=>{l+=ea(e)}):l+=1,l},ea=e=>{let l=0;return e.subCategories&&e.subCategories.length>0?e.subCategories.forEach(e=>{l+=ea(e)}):null!==e.category&&ee(e.items)&&""!==e.value||(l+=1),l},es=(e,l)=>{let a={...e};for(let s in l)l.hasOwnProperty(s)&&("object"!=typeof l[s]||null===l[s]||Array.isArray(l[s])?a[s]=l[s]:a[s]=es(a[s]||{},l[s]));return a},et=e=>{let l=e.reduce((e,l)=>{let a=l.category.key,s=l.items,t=l.value,i=l.subCategories,n=i.length>0?et(i):t,r=s.reduceRight((e,l)=>({[l]:e}),n);return es(e,{[a]:r})},{});return l},ei=()=>{if(!el(V)){let e=et(V);e[Object.keys(e)[0]].default=R,B(e)}},en=async()=>{if(el(V)||null===M)G(!0);else try{E(!0),G(!1);let e=et(V);e[Object.keys(e)[0]].default=R,B(e),await k.ZP.post("https://graph.facebook.com/v21.0/".concat(M.id),{bid_adjustments:{user_groups:e},fields:"bid_adjustments",access_token:W.facebookApiKey}),delete e[Object.keys(e)[0]].default,_.Am.success("Successfully created."),I(),O()}catch(s){var l,a;_.Am.error((null===(l=s.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.message)||s.message)}finally{E(!1)}},er=async()=>{try{E(!0),q(!1);let e=et(V);e[Object.keys(e)[0]].default=R,B(e),await k.ZP.post("https://graph.facebook.com/v21.0/".concat(M.id),{bid_adjustments:{user_groups:e},fields:"bid_adjustments",access_token:W.facebookApiKey}),delete e[Object.keys(e)[0]].default;let{data:l}=await C.Z.post("/bid-multipliers",{categories:e,value:R,advertisement:M,campaign:S,account:a});l.status?(_.Am.success(l.message),O()):_.Am.error(l.message)}catch(i){var s,t;_.Am.error((null==i?void 0:null===(s=i.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||i.message)}finally{E(!1)}};(0,t.useEffect)(()=>{$()},[$]),(0,t.useEffect)(()=>{Y()},[Y]),(0,t.useEffect)(()=>{l&&(K([{category:null,items:[],value:"",subCategories:[]}]),G(!1),B({}))},[l]);let eo=(0,z.D)({matchFrom:"any",stringify:e=>"".concat(e.name," ").concat(e.id)});return(0,s.jsxs)(i.Z,{fullWidth:!0,maxWidth:"xl",open:l,sx:{"& .MuiPaper-root":{maxWidth:1350}},children:[(0,s.jsxs)(n.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:["New Bid Multiplier",(0,s.jsxs)(r.Z,{sx:{display:"flex",flexWrap:"wrap",gap:3,alignItems:"center"},children:[(0,s.jsx)(o.Z,{label:"Account IDs",size:"small",value:null==a?void 0:a.name,disabled:!0}),(0,s.jsx)(o.Z,{label:"Campaign IDs",size:"small",value:null==S?void 0:S.name,disabled:!0}),(0,s.jsx)(u.Z,{options:F,sx:{width:"230px"},getOptionLabel:e=>e.name,renderInput:e=>(0,s.jsx)(o.Z,{...e,label:"Ad Set IDs",size:"small"}),renderOption:(e,l,a)=>(0,s.jsxs)(r.Z,{component:"li",...e,sx:{width:"100%",flexDirection:"column",alignItems:"flex-start !important",backgroundColor:a.inputValue==l.name?"f0f0f0":"#ffffff"},children:[(0,s.jsx)(c.Z,{children:l.name}),(0,s.jsx)(c.Z,{variant:"caption",children:l.id})]}),filterOptions:eo,value:M,onChange(e,l){N(l)}}),(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(m.Z,{size:"small",children:"Day"}),(0,s.jsx)(h.Z,{label:"Day",size:"small",onChange:e=>X(e.target.value),value:Q,children:A.map(e=>(0,s.jsx)(g.Z,{value:e.value,children:e.name},e.value))})]}),(0,s.jsx)(o.Z,{label:"Default Value",size:"small",type:"number",value:R,onChange(e){e.target.value>2?U(2):e.target.value<0?U(0):U(e.target.value)},inputProps:{step:.01,min:0,max:1},sx:{minWidth:120}}),(0,s.jsx)(x.Z,{size:"small",onClick:O,children:(0,s.jsx)(y.Z,{icon:"mdi:close"})})]})]}),(0,s.jsxs)(v.Z,{dividers:!0,children:[(0,s.jsx)(Z.Z,{value:V,isInvalid:J,categories:P,onChange:K}),Object.keys(L).length>0&&(0,s.jsx)(r.Z,{component:"pre",sx:{border:e=>"1px solid ".concat(e.palette.divider),p:3,my:0},children:JSON.stringify(L,null,2)})]}),(0,s.jsxs)(p.Z,{sx:{py:"1rem !important",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsx)(b.Z,{variant:"contained",onClick:ei,sx:{textTransform:"capitalize"},children:"View Result"}),(0,s.jsxs)(r.Z,{sx:{display:"flex",gap:3,alignItems:"center"},children:[(0,s.jsx)(b.Z,{variant:"contained",color:"primary",startIcon:D&&(0,s.jsx)(f.Z,{color:"inherit",size:16}),disabled:!!D||void 0,onClick:en,sx:{textTransform:"capitalize"},children:"Publish"}),(0,s.jsx)(b.Z,{variant:"contained",color:"error",onClick:O,sx:{textTransform:"capitalize"},children:"Cancel"})]}),(0,s.jsx)(w,{open:H,onAgree:er,onClose:()=>q(!1)})]})]})};var O=I},87745:function(e,l,a){var s=a(85893),t=a(1890),i=a(77745),n=a(80562),r=a(95398),o=a(90244),u=a(39807),c=a(69417),d=a(5605),m=a(29630),h=a(61953),g=a(21609);let x=e=>{var l,a;let{account:x,campaign:v,adSet:p,open:b,onClose:f}=e;return(0,s.jsxs)(t.Z,{fullWidth:!0,maxWidth:"sm",open:b,children:[(0,s.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:["Bid Multiplier Details",(0,s.jsx)(n.Z,{size:"small",onClick:f,children:(0,s.jsx)(g.Z,{icon:"mdi:close"})})]}),(0,s.jsx)(r.Z,{dividers:!0,sx:{p:".6rem"},children:(0,s.jsx)(o.Z,{sx:{border:e=>"1px solid ".concat(e.palette.divider)},children:(0,s.jsxs)(u.Z,{children:[(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(d.Z,{sx:{py:".2rem !important"},children:(0,s.jsx)(m.Z,{children:"Account"})}),(0,s.jsxs)(d.Z,{sx:{py:".2rem !important"},children:[(0,s.jsx)(m.Z,{sx:{fontSize:15,lineHeight:1},children:null==x?void 0:x.name}),(0,s.jsx)(m.Z,{variant:"caption",children:null==x?void 0:x.id})]})]}),(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(d.Z,{sx:{py:".2rem !important"},children:(0,s.jsx)(m.Z,{children:"Campaign"})}),(0,s.jsxs)(d.Z,{sx:{py:".2rem !important"},children:[(0,s.jsx)(m.Z,{sx:{fontSize:15,lineHeight:1},children:null==v?void 0:v.name}),(0,s.jsx)(m.Z,{variant:"caption",children:null==v?void 0:v.id})]})]}),(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(d.Z,{sx:{py:".2rem !important"},children:(0,s.jsx)(m.Z,{children:"Ad Set ID"})}),(0,s.jsxs)(d.Z,{sx:{py:".2rem !important"},children:[(0,s.jsx)(m.Z,{sx:{fontSize:15,lineHeight:1},children:null==p?void 0:p.name}),(0,s.jsx)(m.Z,{variant:"caption",children:null==p?void 0:p.id})]})]}),(0,s.jsx)(c.Z,{children:p&&(0,s.jsx)(d.Z,{colSpan:2,sx:{p:"0rem !important"},children:(0,s.jsx)(h.Z,{component:"pre",sx:{background:"#333333",color:"#ffffff",p:3,my:0},children:(null==p?void 0:null===(l=p.bid_adjustments)||void 0===l?void 0:l.user_groups)&&JSON.stringify(JSON.parse(null==p?void 0:null===(a=p.bid_adjustments)||void 0===a?void 0:a.user_groups),null,2)})})})]})})})]})};l.Z=x}}]);