(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{9041:function(e,a,t){"use strict";t.d(a,{Z:function(){return A}});var l,n=t(63366),i=t(87462),s=t(67294),r=t(86010),o=t(94780),d=t(36622),u=t(29630),c=t(82586),m=t(59711),p=t(67074),x=t(1588),h=t(34867);function f(e){return(0,h.Z)("MuiInputAdornment",e)}let v=(0,x.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var Z=t(78884),y=t(85893);let g=["children","className","component","disablePointerEvents","disableTypography","position","variant"],j=(e,a)=>{let{ownerState:t}=e;return[a.root,a[`position${(0,d.Z)(t.position)}`],!0===t.disablePointerEvents&&a.disablePointerEvents,a[t.variant]]},b=e=>{let{classes:a,disablePointerEvents:t,hiddenLabel:l,position:n,size:i,variant:s}=e,r={root:["root",t&&"disablePointerEvents",n&&`position${(0,d.Z)(n)}`,s,l&&"hiddenLabel",i&&`size${(0,d.Z)(i)}`]};return(0,o.Z)(r,f,a)},C=(0,p.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:j})(({theme:e,ownerState:a})=>(0,i.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===a.variant&&{[`&.${v.positionStart}&:not(.${v.hiddenLabel})`]:{marginTop:16}},"start"===a.position&&{marginRight:8},"end"===a.position&&{marginLeft:8},!0===a.disablePointerEvents&&{pointerEvents:"none"})),S=s.forwardRef(function(e,a){let t=(0,Z.Z)({props:e,name:"MuiInputAdornment"}),{children:o,className:d,component:p="div",disablePointerEvents:x=!1,disableTypography:h=!1,position:f,variant:v}=t,j=(0,n.Z)(t,g),S=(0,m.Z)()||{},A=v;v&&S.variant,S&&!A&&(A=S.variant);let I=(0,i.Z)({},t,{hiddenLabel:S.hiddenLabel,size:S.size,disablePointerEvents:x,position:f,variant:A}),k=b(I);return(0,y.jsx)(c.Z.Provider,{value:null,children:(0,y.jsx)(C,(0,i.Z)({as:p,ownerState:I,className:(0,r.Z)(k.root,d),ref:a},j,{children:"string"!=typeof o||h?(0,y.jsxs)(s.Fragment,{children:["start"===f?l||(l=(0,y.jsx)("span",{className:"notranslate",children:"â€‹"})):null,o]}):(0,y.jsx)(u.Z,{color:"text.secondary",children:o})}))})});var A=S},96800:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/multiplier-dimensions",function(){return t(37734)}])},37734:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return F}});var l=t(85893),n=t(67294),i=t(61953),s=t(29630),r=t(72389),o=t(75084),d=t(49837),u=t(59742),c=t(67836),m=t(9041),p=t(14398),x=t(91359),h=t(65824),f=t(21609),v=t(62652),Z=t(5464),y=t(78065),g=t(1890),j=t(77745),b=t(80562),C=t(95398),S=t(55343),A=t(58316),I=t(53442),k=t(86378),z=t(32631),D=t(76779),V=t(70754),w=t(74231),P=t(47533),W=t(87536),E=t(51514),_=t(50196);let T=[{label:"Sunday",value:0},{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6}],M=w.Ry().shape({defaultValue:w.Rx().typeError("Default Value must be a number").required("Default Value is required").min(0,"Default Value must be greater than 0").max(2,"Default Value must be less than 2")}),N=e=>{let{open:a,onInit:t,onClose:s}=e,{settings:r}=(0,E.r)(),[d,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)([]),[h,v]=(0,n.useState)(null),[w,N]=(0,n.useState)([]),[L,O]=(0,n.useState)(null),[R,B]=(0,n.useState)([]),[q,K]=(0,n.useState)(null),[F,$]=(0,n.useState)(!1),{control:Q,reset:U,handleSubmit:X,formState:{errors:H}}=(0,W.cI)({defaultValues:{accountId:"",camapignId:"",adsetId:"",day:"0",defaultValue:""},resolver:(0,P.X)(M),mode:"onChange"}),G=(0,n.useCallback)(async()=>{let{data:e}=await _.ZP.get("https://graph.facebook.com/v22.0/me/adaccounts",{params:{fields:"name",access_token:r.facebookApiKey}});if(e.data.length){let a=e.data.map(e=>({id:e.id,name:e.name}));x(a),v(a[0])}},[]),J=(0,n.useCallback)(async()=>{if(h){let{data:e}=await _.ZP.get("https://graph.facebook.com/v22.0/".concat(h.id,"/campaigns"),{params:{fields:"name",access_token:r.facebookApiKey}});if(e.data.length){let a=e.data.map(e=>({id:e.id,name:e.name}));N(a),O(a[0])}}},[h]),Y=(0,n.useCallback)(async()=>{if(L){let{data:e}=await _.ZP.get("https://graph.facebook.com/v22.0/".concat(L.id,"/adsets"),{params:{fields:"name",access_token:r.facebookApiKey}});if(e.data.length){let a=e.data.map(e=>({id:e.id,name:e.name}));B(a),K(a[0])}}},[L]);(0,n.useEffect)(()=>{G()},[G]),(0,n.useEffect)(()=>{J()},[J]),(0,n.useEffect)(()=>{Y()},[Y]);let ee=async e=>{try{if(u(!0),h){if(L){if(q){if(e.day&&""!=e.day){if(e.defaultValue&&""!=e.defaultValue){let{data:a}=await Z.Z.post("/dimensions",{account:h,campaign:L,advertisement:q,day:e.day,value:e.defaultValue});a.status?(y.Am.success(a.message),U(),t(),s()):y.Am.error(a.message)}else y.Am.error("Please input Default Value")}else y.Am.error("Plase input Day")}else y.Am.error("Please input Ad Set ID")}else y.Am.error("Please input Campaign ID")}else y.Am.error("Please input Account ID")}catch(l){y.Am.error(l.message)}finally{u(!1)}},ea=e=>e?e.charAt(0).toUpperCase()+e.slice(1):e;return(0,l.jsxs)(g.Z,{fullWidth:!0,maxWidth:"sm",open:a,sx:{"& .MuiPaper-root":{maxWidth:400}},children:[(0,l.jsxs)(j.Z,{sx:{display:"flex",slignItems:"center",justifyContent:"space-between",py:"1rem"},children:["Add Default Value by Day",(0,l.jsx)(b.Z,{size:"small",onClick:s,children:(0,l.jsx)(f.Z,{icon:"mdi:close"})})]}),(0,l.jsxs)(i.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:X(ee),children:[(0,l.jsxs)(C.Z,{dividers:!0,children:[(0,l.jsx)(p.Z,{size:"small",options:m,getOptionLabel:e=>e.name,value:h,onChange:(e,a)=>v(a),renderInput:e=>(0,l.jsx)(c.Z,{label:"Account ID",size:"small",error:F&&null===h,...e}),sx:{minWidth:220,marginBottom:"20px"}}),(0,l.jsx)(p.Z,{size:"small",options:w,getOptionLabel:e=>e.name,value:L,onChange:(e,a)=>O(a),renderInput:e=>(0,l.jsx)(c.Z,{label:"Campaign ID",size:"small",error:F&&null===L,...e}),sx:{minWidth:220,marginBottom:"20px"}}),(0,l.jsx)(p.Z,{size:"small",options:R,getOptionLabel:e=>ea(e.name),value:q,onChange:(e,a)=>K(a),renderInput:e=>(0,l.jsx)(c.Z,{label:"Ad Set ID",size:"small",error:F&&null===q,...e}),sx:{minWidth:220,marginBottom:"20px"}}),(0,l.jsxs)(S.Z,{fullWidth:!0,sx:{mb:5},children:[(0,l.jsx)(A.Z,{size:"small",children:"Day"}),(0,l.jsx)(W.Qr,{name:"day",control:Q,render(e){let{field:a}=e;return(0,l.jsx)(I.Z,{label:"Day",size:"small",...a,children:T.map(e=>(0,l.jsx)(k.Z,{value:e.value,children:e.label},e.value))})}})]}),(0,l.jsx)(S.Z,{fullWidth:!0,children:(0,l.jsx)(W.Qr,{name:"defaultValue",control:Q,render(e){let{field:{value:a,onChange:t}}=e;return(0,l.jsx)(c.Z,{size:"small",value:a,type:"number",label:"Default Value",inputProps:{step:.01,min:0,max:2},onChange:t,error:Boolean(H.defaultValue)})}})}),H.defaultValue&&(0,l.jsx)(z.Z,{sx:{color:"error.main",mx:1},children:H.defaultValue.message})]}),(0,l.jsxs)(D.Z,{sx:{py:"1rem !important"},children:[(0,l.jsx)(o.Z,{variant:"contained",type:"submit",startIcon:d&&(0,l.jsx)(V.Z,{color:"inherit",size:16}),disabled:!!d||void 0,sx:{textTransform:"capitalize"},children:"Create"}),(0,l.jsx)(o.Z,{variant:"contained",color:"error",onClick:s,sx:{textTransform:"capitalize"},children:"Cancel"})]})]})]})},L=[{label:"Sunday",value:0},{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6}],O=w.Ry().shape({defaultValue:w.Rx().typeError("Default Value must be a number").required("Default Value is required").min(0,"Default Value must be greater than or equal to 0").max(2,"Default Value must be less than or equal to 2")}),R=e=>{let{open:a,onInit:t,onClose:s,row:r}=e,{settings:d}=(0,E.r)(),[u,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)([]),[v,w]=(0,n.useState)(null),[T,M]=(0,n.useState)([]),[N,R]=(0,n.useState)(null),[B,q]=(0,n.useState)([]),[K,F]=(0,n.useState)(null),[$,Q]=(0,n.useState)(!1),{control:U,reset:X,handleSubmit:H,formState:{errors:G}}=(0,W.cI)({mode:"onChange",resolver:(0,P.X)(O),defaultValues:{day:r.day||"",defaultValue:r.defaultValue||"",accountId:"",campaignId:"",adSetId:""}}),J=(0,n.useCallback)(async()=>{let{data:e}=await _.ZP.get("https://graph.facebook.com/v22.0/me/adaccounts",{params:{fields:"name",access_token:d.facebookApiKey}});if(e.data.length){let a=e.data.map(e=>({id:e.id,name:e.name}));h(a)}},[]),Y=(0,n.useCallback)(async()=>{if(v){let{data:e}=await _.ZP.get("https://graph.facebook.com/v22.0/".concat(v.id,"/campaigns"),{params:{fields:"name",access_token:d.facebookApiKey}});if(e.data.length){let a=e.data.map(e=>({id:e.id,name:e.name}));M(a)}}},[v]),ee=(0,n.useCallback)(async()=>{if(N){let{data:e}=await _.ZP.get("https://graph.facebook.com/v22.0/".concat(N.id,"/adsets"),{params:{fields:"name",access_token:d.facebookApiKey}});if(e.data.length){let a=e.data.map(e=>({id:e.id,name:e.name}));q(a)}}},[N]);(0,n.useEffect)(()=>{J()},[J]),(0,n.useEffect)(()=>{Y()},[Y]),(0,n.useEffect)(()=>{ee()},[ee]),(0,n.useEffect)(()=>{X({day:r.day.toString()||"",defaultValue:r.value||""}),F(r.advertisement),R(r.campaign),w(r.account)},[r,X]),(0,n.useEffect)(()=>{F(K),R(N),w(v)},[K,N,v]);let ea=e=>e?e.charAt(0).toUpperCase()+e.slice(1):e,et=async e=>{try{if(m(!0),v){if(N){if(K){if(e.day&&""!=e.day){if(e.defaultValue&&""!=e.defaultValue){let{data:a}=await Z.Z.put("/dimensions/".concat(r._id),{advertisement:K,campaign:N,account:v,day:e.day,value:e.defaultValue});a.status?(y.Am.success(a.message),t(),s()):y.Am.error(a.message)}else y.Am.error("Please input Default Value")}else y.Am.error("Plase input Day")}else y.Am.error("Please input Ad Set ID")}else y.Am.error("Please input Campaign ID")}else y.Am.error("Please input Account ID")}catch(l){y.Am.error(l.message)}finally{m(!1)}};return(0,l.jsxs)(g.Z,{fullWidth:!0,maxWidth:"sm",open:a,sx:{"& .MuiPaper-root":{maxWidth:400}},children:[(0,l.jsxs)(j.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",py:"1rem"},children:["Edit Default Value by Day",(0,l.jsx)(b.Z,{size:"small",onClick:s,children:(0,l.jsx)(f.Z,{icon:"mdi:close"})})]}),(0,l.jsxs)(i.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:H(et),children:[(0,l.jsxs)(C.Z,{dividers:!0,children:[(0,l.jsx)(p.Z,{size:"small",options:x,getOptionLabel:e=>e.name,value:v,onChange:(e,a)=>w(a),renderInput:e=>(0,l.jsx)(c.Z,{label:"Account ID",size:"small",error:$&&null===v,...e}),sx:{minWidth:220,marginBottom:"20px"}}),(0,l.jsx)(p.Z,{size:"small",options:T,getOptionLabel:e=>e.name,value:N,onChange:(e,a)=>R(a),renderInput:e=>(0,l.jsx)(c.Z,{label:"Campaign ID",size:"small",error:$&&null===N,...e}),sx:{minWidth:220,marginBottom:"20px"}}),(0,l.jsx)(p.Z,{size:"small",options:B,getOptionLabel:e=>ea(e.name),value:K,onChange:(e,a)=>F(a),renderInput:e=>(0,l.jsx)(c.Z,{label:"Ad Set ID",size:"small",error:$&&null===K,...e}),sx:{minWidth:220,marginBottom:"20px"}}),(0,l.jsxs)(S.Z,{fullWidth:!0,sx:{mb:5},children:[(0,l.jsx)(A.Z,{size:"small",children:"Day"}),(0,l.jsx)(W.Qr,{name:"day",control:U,render(e){let{field:a}=e;return(0,l.jsx)(I.Z,{label:"Day",size:"small",...a,children:L.map(e=>(0,l.jsx)(k.Z,{value:e.value,children:e.label},e.value))})}})]}),(0,l.jsxs)(S.Z,{fullWidth:!0,children:[(0,l.jsx)(W.Qr,{name:"defaultValue",control:U,render(e){let{field:{value:a,onChange:t}}=e;return(0,l.jsx)(c.Z,{size:"small",value:a||"",type:"number",label:"Default Value",inputProps:{step:.01,min:0,max:2},onChange:t,error:Boolean(G.defaultValue)})}}),G.defaultValue&&(0,l.jsx)(z.Z,{sx:{color:"error.main",mx:1},children:G.defaultValue.message})]})]}),(0,l.jsxs)(D.Z,{sx:{py:"1rem !important"},children:[(0,l.jsx)(o.Z,{variant:"contained",type:"submit",startIcon:u&&(0,l.jsx)(V.Z,{color:"inherit",size:16}),disabled:u,sx:{textTransform:"capitalize"},children:"Update"}),(0,l.jsx)(o.Z,{variant:"contained",color:"error",onClick:s,sx:{textTransform:"capitalize"},children:"Cancel"})]})]})]})};var B=t(44642);let q=e=>{let{id:a,open:t,onInit:i,onClose:s}=e,[r,d]=(0,n.useState)(!1),u=async()=>{try{let{data:e}=await Z.Z.delete("/dimensions/".concat(a));e.status?(y.Am.success(e.message),i(),s()):y.Am.error(e.message)}catch(n){var t,l;y.Am.error((null===(t=n.response)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.message)||n.message)}finally{setTimeout(()=>{d(!1)},500)}};return(0,l.jsxs)(g.Z,{fullWidth:!0,maxWidth:"sm",open:t,onClose:s,sx:{"& .MuiPaper-root":{maxWidth:520}},children:[(0,l.jsx)(j.Z,{sx:{pb:"0.5rem"},children:"Are you sure you want to delete this dimension?"}),(0,l.jsx)(C.Z,{children:(0,l.jsx)(B.Z,{children:"Once you delete this dimension, you cannot revert it again."})}),(0,l.jsxs)(D.Z,{children:[(0,l.jsx)(o.Z,{variant:"contained",color:"primary",disabled:!!r||void 0,startIcon:r&&(0,l.jsx)(V.Z,{color:"inherit",size:16}),sx:{textTransform:"capitalize"},onClick:u,children:"Delete"}),(0,l.jsx)(o.Z,{variant:"contained",color:"error",sx:{textTransform:"capitalize"},onClick:s,children:"Cancel"})]})]})},K=()=>{let[e,a]=(0,n.useState)(!1),[t,g]=(0,n.useState)(!1),[j,b]=(0,n.useState)(!1),[C,S]=(0,n.useState)({day:"",defaultValue:0}),[A,I]=(0,n.useState)([]),[k,z]=(0,n.useState)(""),[D,V]=(0,n.useState)(1),[w,P]=(0,n.useState)({name:"All",value:""}),[W,E]=(0,n.useState)(0),_=[{name:"All",value:""},{name:"Sunday",value:"0"},{name:"Monday",value:"1"},{name:"Tuesday",value:"2"},{name:"Wednesday",value:"3"},{name:"Thursday",value:"4"},{name:"Friday",value:"5"},{name:"Saturday",value:"6"}],T=(0,n.useCallback)(async()=>{try{let e={search:k,day:w.value,skip:(D-1)*10,limit:10},{data:a}=await Z.Z.get("/dimensions",{params:e});a.status?I(a.dimensions):y.Am.error(a.message)}catch(n){var t,l;y.Am.error((null===(t=n.response)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.message)||n.message)}},[w,k]);(0,n.useEffect)(()=>{T()},[T]);let M=e=>{S(e),g(!0)},L=e=>{S(e),b(!0)},O=(e,a)=>{P(a&&""!==a.value?a:_[0])};return(0,l.jsxs)(d.Z,{elevation:0,sx:{border:e=>"1px solid ".concat(e.palette.divider),height:"100%"},children:[(0,l.jsx)(u.Z,{title:"Day of week dimensions",action:(0,l.jsxs)(i.Z,{sx:{display:"flex",gap:3},children:[(0,l.jsx)(c.Z,{size:"small",placeholder:"Search...",InputProps:{endAdornment:(0,l.jsx)(m.Z,{position:"end",children:(0,l.jsx)(f.Z,{icon:"ri:search-line"})})},value:k,onChange:e=>z(e.target.value)}),(0,l.jsx)(p.Z,{size:"small",options:_,getOptionLabel:e=>e.name,value:w,onChange:O,renderInput:e=>(0,l.jsx)(c.Z,{label:"Day",size:"small",error:null===w,...e}),sx:{minWidth:150}}),(0,l.jsx)(o.Z,{variant:"contained",startIcon:(0,l.jsx)(f.Z,{icon:"mdi:plus"}),sx:{textTransform:"capitalize"},onClick:()=>a(!0),children:"Add"})]}),sx:{display:"flex",flexWrap:"wrap"}}),(0,l.jsxs)(x.Z,{sx:{px:0,heigh:"100%"},children:[(0,l.jsx)(v._,{autoHeight:!0,getRowId:e=>e._id,getRowHeight:e=>"auto",columns:[{width:120,field:"day",headerName:"Day",renderCell(e){var a;let{row:t}=e,n=t.day,s=(null===(a=_.find(e=>e.value==n.toString()))||void 0===a?void 0:a.name)||"Unknown Day";return(0,l.jsx)(i.Z,{children:s})}},{flex:1,minWidth:250,field:"account",headerName:"Account",renderCell(e){var a,t;let{row:n}=e;return(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(i.Z,{sx:{textTransform:"capitalize"},children:null==n?void 0:null===(a=n.account)||void 0===a?void 0:a.name}),(0,l.jsx)(s.Z,{variant:"caption",children:null===(t=n.account)||void 0===t?void 0:t.id})]})}},{flex:1,minWidth:320,field:"campaign",headerName:"Campaign",renderCell(e){var a,t;let{row:n}=e;return(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(i.Z,{children:null==n?void 0:null===(a=n.campaign)||void 0===a?void 0:a.name}),(0,l.jsx)(s.Z,{variant:"caption",children:null==n?void 0:null===(t=n.campaign)||void 0===t?void 0:t.id})]})}},{flex:1,minWidth:250,field:"advertisement",headerName:"Ad Set Id",renderCell(e){var a,t;let{row:n}=e;return(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(i.Z,{sx:{textTransform:"capitalize"},children:null==n?void 0:null===(a=n.advertisement)||void 0===a?void 0:a.name}),(0,l.jsx)(s.Z,{variant:"caption",children:null===(t=n.advertisement)||void 0===t?void 0:t.id})]})}},{width:80,field:"value",headerName:"Value"},{width:115,field:"action",headerName:"Action",renderCell(e){let{row:a}=e;return(0,l.jsxs)(i.Z,{sx:{display:"flex",gap:3},children:[(0,l.jsx)(r.Z,{title:"Edit",children:(0,l.jsx)(o.Z,{variant:"outlined",color:"success",size:"small",sx:{minWidth:36,width:36,height:36,px:"0 !important"},onClick:()=>M(a),children:(0,l.jsx)(f.Z,{icon:"bx:edit"})})}),(0,l.jsx)(r.Z,{title:"Delete",children:(0,l.jsx)(o.Z,{variant:"outlined",color:"error",size:"small",sx:{minWidth:36,width:36,height:36,px:"0 !important"},onClick:()=>L(a),children:(0,l.jsx)(f.Z,{icon:"mdi:delete-outline"})})})]})}}],rows:A,disableColumnMenu:!0,disableColumnSorting:!0,disableMultipleRowSelection:!0,disableRowSelectionOnClick:!0,hideFooter:!0,sx:{"& .MuiDataGrid-cell":{py:"8px !important"},borderBottom:e=>"1px solid ".concat(e.palette.divider)}}),(0,l.jsx)(i.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",pt:4},children:(0,l.jsx)(h.Z,{page:D,count:Math.ceil(W/10),variant:"outlined",shape:"rounded",onChange:(e,a)=>V(a)})}),(0,l.jsx)(N,{open:e,onInit:T,onClose:()=>a(!1)}),(0,l.jsx)(R,{open:t,onInit:T,onClose:()=>g(!1),row:C}),(0,l.jsx)(q,{open:j,onInit:T,onClose:()=>b(!1),id:null==C?void 0:C._id})]})]})};var F=K}},function(e){e.O(0,[976,836,536,957,491,534,774,888,179],function(){return e(e.s=96800)}),_N_E=e.O()}]);