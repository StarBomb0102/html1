(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{77787:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return s(20318)}])},19550:function(e,r,s){"use strict";var a=s(62097),t=s(5026);let o=()=>{let e=(0,a.Z)();return{primaryFilled:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},primaryLight:{color:e.palette.primary.main,backgroundColor:(0,t.E)(e.palette.primary.main,.12)},secondaryFilled:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main},secondaryLight:{color:e.palette.secondary.main,backgroundColor:(0,t.E)(e.palette.secondary.main,.12)},successFilled:{color:e.palette.success.contrastText,backgroundColor:e.palette.success.main},successLight:{color:e.palette.success.main,backgroundColor:(0,t.E)(e.palette.success.main,.12)},errorFilled:{color:e.palette.error.contrastText,backgroundColor:e.palette.error.main},errorLight:{color:e.palette.error.main,backgroundColor:(0,t.E)(e.palette.error.main,.12)},warningFilled:{color:e.palette.warning.contrastText,backgroundColor:e.palette.warning.main},warningLight:{color:e.palette.warning.main,backgroundColor:(0,t.E)(e.palette.warning.main,.12)},infoFilled:{color:e.palette.info.contrastText,backgroundColor:e.palette.info.main},infoLight:{color:e.palette.info.main,backgroundColor:(0,t.E)(e.palette.info.main,.12)}}};r.Z=o},4776:function(e,r,s){"use strict";var a=s(85893),t=s(67294),o=s(61953),n=s(75084);let i=e=>{let{value:r,error:s,width:i=100,height:l=100,onChange:d}=e,c=(0,t.useRef)(null),m=e=>{d(e.target.files[0])},u=()=>{d("")};return(0,a.jsx)(o.Z,{sx:{width:i,height:l},children:(0,a.jsxs)(o.Z,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:1,overflow:"hidden",border:e=>"1px solid ".concat(s?e.palette.error.main:e.palette.divider),"&:hover .actions":{opacity:1}},children:[(0,a.jsx)(o.Z,{component:"img",src:r?r instanceof File?URL.createObjectURL(r):"".concat("/uploads","/avatars/").concat(r):"/images/avatars/avatar.png",alt:"Photo",sx:{width:i,height:l,objectFit:"cover"}}),(0,a.jsxs)(o.Z,{className:"actions",sx:{position:"absolute",background:"#0000007a",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:2,alignItems:"center",justifyContent:"center",opacity:0,transition:"all .3s ease"},children:[(0,a.jsx)(n.Z,{variant:"outlined",size:"small",color:"primary",onClick:()=>c.current.click(),sx:{color:"#ffffff",borderColor:"#ffffff",textTransform:"capitalize","&:hover":{borderColor:"#fafafa"}},children:"Browse"}),r&&(0,a.jsx)(n.Z,{variant:"outlined",size:"small",color:"error",onClick:u,sx:{color:"#ffffff",borderColor:"#ffffff",textTransform:"capitalize","&:hover":{borderColor:"#fafafa"}},children:"Remove"}),(0,a.jsx)(o.Z,{component:"input",type:"file",ref:c,accept:"image/*",sx:{display:"none"},onChange:m})]})]})})};r.Z=i},20318:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return $}});var a=s(85893),t=s(67294),o=s(61953),n=s(29630),i=s(72389),l=s(75084),d=s(49837),c=s(59742),m=s(67836),u=s(9041),x=s(91359),h=s(65824),p=s(21609),f=s(21448),j=s(86010),Z=s(19550);let g=e=>{let{sx:r,skin:s,color:t,rounded:o}=e,n=(0,Z.Z)(),i={primary:{...n.primaryLight},secondary:{...n.secondaryLight},success:{...n.successLight},error:{...n.errorLight},warning:{...n.warningLight},info:{...n.infoLight}},l={...e};return l.rounded=void 0,(0,a.jsx)(f.Z,{...l,variant:"filled",className:(0,j.Z)({"MuiChip-rounded":o,"MuiChip-light":"light"===s}),sx:"light"===s&&t?Object.assign(i[t],r):r})};var v=s(62652),w=s(5464),C=s(30381),y=s.n(C),b=s(78065),k=s(1890),N=s(77745),z=s(80562),W=s(95398),S=s(55343),q=s(32631),A=s(58316),F=s(53442),_=s(86378),P=s(39063),B=s(76779),E=s(70754),T=s(87536),R=s(74231),D=s(47533),I=s(4776),L=s(67555),M=s.n(L);s(58530);let Q=e=>{let{open:r,onInit:s,onClose:n}=e,[i,d]=(0,t.useState)(!1),[c,x]=(0,t.useState)(!1),[h,f]=(0,t.useState)(!1),j={avatar:"",firstName:"",lastName:"",email:"",phone:"",role:"user",password:"",confirmation:""},Z=R.Ry().shape({firstName:R.Z_().required("First name is required"),lastName:R.Z_().required("Last name is required"),email:R.Z_().email("Email is invalid").required("Email is required"),phone:R.Z_().matches(/^\+?[1-9]\d{1,14}$/,"Phone number must be valid").required("Phone number is required"),role:R.Z_().required("Role is required"),password:R.Z_().min(5,"Password must be at least 5 characters long").required("Password is required"),confirmation:R.Z_().test("password-match","Password confirmation doesn't matche the password",function(e){return this.parent.password===e}).required("Password confirmation is a required field")}),{control:g,reset:v,handleSubmit:C,formState:{errors:y}}=(0,T.cI)({defaultValues:j,mode:"onChange",resolver:(0,D.X)(Z)});(0,t.useEffect)(()=>{r&&v(j)},[r]);let L=async e=>{try{d(!0);let r=new FormData;delete e.confirmation,Object.keys(e).forEach(s=>{"avatar"===s?e[s]instanceof File&&r.append(s,e[s]):r.append(s,e[s])});let{data:a}=await w.Z.post("/users",r);a.status?(b.Am.success(a.message),s(),n()):b.Am.error(a.message)}catch(i){var t,o;b.Am.error((null===(t=i.response)||void 0===t?void 0:null===(o=t.data)||void 0===o?void 0:o.message)||i.message)}finally{setTimeout(()=>{d(!1)},500)}};return(0,a.jsxs)(k.Z,{fullWidth:!0,maxWidth:"sm",open:r,sx:{"& .MuiPaper-root":{maxWidth:500}},children:[(0,a.jsxs)(N.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",py:"1rem"},children:["New User",(0,a.jsx)(z.Z,{size:"small",onClick:n,children:(0,a.jsx)(p.Z,{icon:"mdi:close"})})]}),(0,a.jsxs)(o.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:C(L),children:[(0,a.jsxs)(W.Z,{dividers:!0,children:[(0,a.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"center",gap:5,mb:5},children:[(0,a.jsx)(T.Qr,{name:"avatar",control:g,render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(I.Z,{value:r,onChange:s,error:Boolean(y.avatar)})}}),(0,a.jsxs)(o.Z,{children:[(0,a.jsxs)(S.Z,{fullWidth:!0,sx:{mb:5},children:[(0,a.jsx)(T.Qr,{name:"firstName",control:g,render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(m.Z,{size:"small",autoFocus:!0,value:r,label:"First Name",onChange:s,placeholder:"",error:Boolean(y.firstName)})}}),y.firstName&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:1},children:y.firstName.message})]}),(0,a.jsxs)(S.Z,{fullWidth:!0,children:[(0,a.jsx)(T.Qr,{name:"lastName",control:g,render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(m.Z,{size:"small",value:r,label:"Last Name",onChange:s,error:Boolean(y.lastName)})}}),y.lastName&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:1},children:y.lastName.message})]})]})]}),(0,a.jsxs)(S.Z,{fullWidth:!0,sx:{mb:5},children:[(0,a.jsx)(T.Qr,{name:"email",control:g,rules:{required:!0},render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(m.Z,{size:"small",value:r,label:"Email",autoComplete:"email",onChange:s,error:Boolean(y.email)})}}),y.email&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:1},children:y.email.message})]}),(0,a.jsxs)(S.Z,{fullWidth:!0,sx:{mb:5},dir:"ltr",children:[(0,a.jsx)(T.Qr,{name:"phone",control:g,render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(M(),{country:"us",specialLabel:"Phone",value:r,onChange:e=>s(e),inputStyle:{width:"100%",padding:"9.5px 14px 9.5px 58px",borderRadius:"8px",borderColor:Boolean(y.phone)&&"#FF4D49"}})}}),y.phone&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:1},children:y.phone.message})]}),(0,a.jsxs)(S.Z,{fullWidth:!0,sx:{mb:5},children:[(0,a.jsx)(A.Z,{size:"small",error:Boolean(y.role),children:"Role"}),(0,a.jsx)(T.Qr,{name:"role",control:g,render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsxs)(F.Z,{size:"small",label:"Role",value:r,onChange:s,error:Boolean(y.role),children:[(0,a.jsx)(_.Z,{value:"user",children:"User"}),(0,a.jsx)(_.Z,{value:"admin",children:"Admin"})]})}}),y.role&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:.5},children:y.role.message})]}),(0,a.jsxs)(S.Z,{fullWidth:!0,sx:{mb:5},children:[(0,a.jsx)(A.Z,{size:"small",htmlFor:"password",error:Boolean(y.password),children:"Password"}),(0,a.jsx)(T.Qr,{name:"password",control:g,rules:{required:!0},render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(P.Z,{size:"small",value:r,label:"Password",onChange:s,id:"password",autoComplete:"new-password",error:Boolean(y.password),type:c?"text":"password",endAdornment:(0,a.jsx)(u.Z,{position:"end",children:(0,a.jsx)(z.Z,{edge:"end",onMouseDown:e=>e.preventDefault(),onClick:()=>x(!c),children:(0,a.jsx)(p.Z,{icon:c?"mdi:eye-outline":"mdi:eye-off-outline"})})})})}}),y.password&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:1},children:y.password.message})]}),(0,a.jsxs)(S.Z,{fullWidth:!0,children:[(0,a.jsx)(A.Z,{size:"small",htmlFor:"confirmation",error:Boolean(y.confirmation),children:"Re-type password"}),(0,a.jsx)(T.Qr,{name:"confirmation",control:g,rules:{required:!0},render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(P.Z,{size:"small",value:r,label:"Re-type password",onChange:s,id:"confirmation",autoComplete:"new-password",error:Boolean(y.confirmation),type:h?"text":"password",endAdornment:(0,a.jsx)(u.Z,{position:"end",children:(0,a.jsx)(z.Z,{edge:"end",onMouseDown:e=>e.preventDefault(),onClick:()=>f(!h),children:(0,a.jsx)(p.Z,{icon:h?"mdi:eye-outline":"mdi:eye-off-outline"})})})})}}),y.confirmation&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:1},children:y.confirmation.message})]})]}),(0,a.jsxs)(B.Z,{sx:{py:"1rem !important"},children:[(0,a.jsx)(l.Z,{variant:"contained",type:"submit",startIcon:i&&(0,a.jsx)(E.Z,{color:"inherit",size:16}),disabled:!!i||void 0,sx:{textTransform:"capitalize"},children:"Create"}),(0,a.jsx)(l.Z,{variant:"contained",color:"error",onClick:n,sx:{textTransform:"capitalize"},children:"Cancel"})]})]})]})};var U=s(44642);let O=e=>{let{id:r,status:s,open:o,onInit:n,onClose:i}=e,[d,c]=(0,t.useState)(!1),m=async()=>{try{let{data:e}=await w.Z.put("/users/".concat(r),{status:s});e.status?(b.Am.success(e.message),n(),i()):b.Am.error(e.message)}catch(o){var a,t;b.Am.error((null===(a=o.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||o.message)}finally{setTimeout(()=>{c(!1)},500)}};return(0,a.jsxs)(k.Z,{fullWidth:!0,maxWidth:"sm",open:o,onClose:i,sx:{"& .MuiPaper-root":{maxWidth:500}},children:[(0,a.jsxs)(N.Z,{sx:{pb:"0.5rem"},children:["Do you want to ",s?"enable":"disable"," this user?"]}),(0,a.jsx)(W.Z,{children:(0,a.jsx)(U.Z,{children:s?"Once user is enabled, this user can't access to their panel.":"Once user is disabled, this user can access to their panel."})}),(0,a.jsxs)(B.Z,{children:[(0,a.jsx)(l.Z,{variant:"contained",color:"primary",disabled:!!d||void 0,startIcon:d&&(0,a.jsx)(E.Z,{color:"inherit",size:16}),sx:{textTransform:"capitalize"},onClick:m,children:"Update"}),(0,a.jsx)(l.Z,{variant:"contained",color:"error",sx:{textTransform:"capitalize"},onClick:i,children:"Cancel"})]})]})},X=e=>{let{id:r,open:s,onInit:n,onClose:i}=e,[d,c]=(0,t.useState)(!1),[u,x]=(0,t.useState)(!1),[h,f]=(0,t.useState)(!1),j=R.Ry().shape({firstName:R.Z_().required("First name is required"),lastName:R.Z_().required("Last name is required"),email:R.Z_().email("Email is invalid").required("Email is required"),phone:R.Z_().matches(/^\+?[1-9]\d{1,14}$/,"Phone number must be valid").required("Phone number is required"),role:R.Z_().required("Role is required")}),{control:Z,reset:g,handleSubmit:v,formState:{errors:C}}=(0,T.cI)({defaultValues:{avatar:"",firstName:"",lastName:"",email:"",phone:"",role:"user"},mode:"onChange",resolver:(0,D.X)(j)}),y=(0,t.useCallback)(async()=>{if(s&&r)try{let{data:e}=await w.Z.get("/users/".concat(r));g({avatar:e.avatar,firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,role:e.role})}catch(o){var a,t;b.Am.error((null===(a=o.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||o.message)}},[s]);(0,t.useEffect)(()=>{y()},[y]);let P=async e=>{try{c(!0),delete e.confirmation;let s=new FormData;Object.keys(e).forEach((r,a)=>{"avatar"===r?e[r]instanceof File&&s.append(r,e[r]):s.append(r,e[r])});let{data:a}=await w.Z.put("/users/".concat(r),s);a.status?(b.Am.success(a.message),n(),i()):b.Am.error(a.message)}catch(l){var t,o;b.Am.error((null===(t=l.response)||void 0===t?void 0:null===(o=t.data)||void 0===o?void 0:o.message)||l.message)}finally{setTimeout(()=>{c(!1)},500)}};return(0,a.jsxs)(k.Z,{fullWidth:!0,maxWidth:"sm",open:s,sx:{"& .MuiPaper-root":{maxWidth:500}},children:[(0,a.jsxs)(N.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",py:"1rem"},children:["Edit User",(0,a.jsx)(z.Z,{size:"small",onClick:i,children:(0,a.jsx)(p.Z,{icon:"mdi:close"})})]}),(0,a.jsxs)(o.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:v(P),children:[(0,a.jsxs)(W.Z,{dividers:!0,children:[(0,a.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"center",gap:5,mb:5},children:[(0,a.jsx)(T.Qr,{name:"avatar",control:Z,render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(I.Z,{value:r,onChange:s,error:Boolean(C.avatar)})}}),(0,a.jsxs)(o.Z,{children:[(0,a.jsxs)(S.Z,{fullWidth:!0,sx:{mb:5},children:[(0,a.jsx)(T.Qr,{name:"firstName",control:Z,render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(m.Z,{size:"small",autoFocus:!0,value:r,label:"First Name",onChange:s,placeholder:"",error:Boolean(C.firstName)})}}),C.firstName&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:1},children:C.firstName.message})]}),(0,a.jsxs)(S.Z,{fullWidth:!0,children:[(0,a.jsx)(T.Qr,{name:"lastName",control:Z,render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(m.Z,{size:"small",value:r,label:"Last Name",onChange:s,error:Boolean(C.lastName)})}}),C.lastName&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:1},children:C.lastName.message})]})]})]}),(0,a.jsxs)(S.Z,{fullWidth:!0,sx:{mb:5},children:[(0,a.jsx)(T.Qr,{name:"email",control:Z,rules:{required:!0},render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(m.Z,{size:"small",value:r,label:"Email",autoComplete:"email",onChange:s,error:Boolean(C.email)})}}),C.email&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:1},children:C.email.message})]}),(0,a.jsxs)(S.Z,{fullWidth:!0,sx:{mb:5},dir:"ltr",children:[(0,a.jsx)(T.Qr,{name:"phone",control:Z,render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(M(),{country:"us",specialLabel:"Phone",value:r,onChange:e=>s(e),inputStyle:{width:"100%",padding:"9.5px 14px 9.5px 58px",borderRadius:"8px",borderColor:Boolean(C.phone)&&"#FF4D49"}})}}),C.phone&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:1},children:C.phone.message})]}),(0,a.jsxs)(S.Z,{fullWidth:!0,children:[(0,a.jsx)(A.Z,{size:"small",error:Boolean(C.role),children:"Role"}),(0,a.jsx)(T.Qr,{name:"role",control:Z,render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsxs)(F.Z,{size:"small",label:"Role",value:r,onChange:s,error:Boolean(C.role),children:[(0,a.jsx)(_.Z,{value:"user",children:"User"}),(0,a.jsx)(_.Z,{value:"admin",children:"Admin"})]})}}),C.role&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:.5},children:C.role.message})]})]}),(0,a.jsxs)(B.Z,{sx:{py:"1rem !important"},children:[(0,a.jsx)(l.Z,{variant:"contained",type:"submit",startIcon:d&&(0,a.jsx)(E.Z,{color:"inherit",size:16}),disabled:!!d||void 0,sx:{textTransform:"capitalize"},children:"Update"}),(0,a.jsx)(l.Z,{variant:"contained",color:"error",onClick:i,sx:{textTransform:"capitalize"},children:"Cancel"})]})]})]})},H=e=>{let{id:r,open:s,onClose:n}=e,[i,d]=(0,t.useState)(!1),[c,m]=(0,t.useState)(!1),[x,h]=(0,t.useState)(!1),f={password:"",confirmation:""},j=R.Ry().shape({password:R.Z_().min(5,"Password must be at least 5 characters long").required("Password is required"),confirmation:R.Z_().test("password-match","Password confirmation doesn't matche the password",function(e){return this.parent.password===e}).required("Password confirmation is a required field")}),{control:Z,reset:g,handleSubmit:v,formState:{errors:C}}=(0,T.cI)({defaultValues:f,mode:"onChange",resolver:(0,D.X)(j)});(0,t.useEffect)(()=>{s&&g(f)},[s]);let y=async e=>{try{d(!0);let s=new FormData;s.append("password",e.password);let{data:a}=await w.Z.put("/users/".concat(r),s);a.status?(b.Am.success(a.message),n()):b.Am.error(a.message)}catch(i){var t,o;b.Am.error((null===(t=i.response)||void 0===t?void 0:null===(o=t.data)||void 0===o?void 0:o.message)||i.message)}finally{setTimeout(()=>{d(!1)},500)}};return(0,a.jsxs)(k.Z,{fullWidth:!0,maxWidth:"xs",open:s,children:[(0,a.jsxs)(N.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",py:"1rem"},children:["Change Password",(0,a.jsx)(z.Z,{size:"small",onClick:n,children:(0,a.jsx)(p.Z,{icon:"mdi:close"})})]}),(0,a.jsxs)(o.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:v(y),children:[(0,a.jsxs)(W.Z,{dividers:!0,children:[(0,a.jsxs)(S.Z,{fullWidth:!0,sx:{mb:5},children:[(0,a.jsx)(A.Z,{size:"small",htmlFor:"password",error:Boolean(C.password),children:"Password"}),(0,a.jsx)(T.Qr,{name:"password",control:Z,rules:{required:!0},render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(P.Z,{size:"small",value:r,label:"Password",onChange:s,id:"password",autoComplete:"new-password",error:Boolean(C.password),type:c?"text":"password",endAdornment:(0,a.jsx)(u.Z,{position:"end",children:(0,a.jsx)(z.Z,{edge:"end",onMouseDown:e=>e.preventDefault(),onClick:()=>m(!c),children:(0,a.jsx)(p.Z,{icon:c?"mdi:eye-outline":"mdi:eye-off-outline"})})})})}}),C.password&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:1},children:C.password.message})]}),(0,a.jsxs)(S.Z,{fullWidth:!0,children:[(0,a.jsx)(A.Z,{size:"small",htmlFor:"confirmation",error:Boolean(C.confirmation),children:"Re-type password"}),(0,a.jsx)(T.Qr,{name:"confirmation",control:Z,rules:{required:!0},render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(P.Z,{size:"small",value:r,label:"Re-type password",onChange:s,id:"confirmation",autoComplete:"new-password",error:Boolean(C.confirmation),type:x?"text":"password",endAdornment:(0,a.jsx)(u.Z,{position:"end",children:(0,a.jsx)(z.Z,{edge:"end",onMouseDown:e=>e.preventDefault(),onClick:()=>h(!x),children:(0,a.jsx)(p.Z,{icon:x?"mdi:eye-outline":"mdi:eye-off-outline"})})})})}}),C.confirmation&&(0,a.jsx)(q.Z,{sx:{color:"error.main",mx:1},children:C.confirmation.message})]})]}),(0,a.jsxs)(B.Z,{sx:{py:"1rem !important"},children:[(0,a.jsx)(l.Z,{variant:"contained",type:"submit",startIcon:i&&(0,a.jsx)(E.Z,{color:"inherit",size:16}),disabled:!!i||void 0,sx:{textTransform:"capitalize"},children:"Update"}),(0,a.jsx)(l.Z,{variant:"contained",color:"error",onClick:n,sx:{textTransform:"capitalize"},children:"Cancel"})]})]})]})},V=e=>{let{id:r,open:s,onInit:o,onClose:n}=e,[i,d]=(0,t.useState)(!1),c=async()=>{try{let{data:e}=await w.Z.delete("/users/".concat(r));e.status?(b.Am.success(e.message),o(),n()):b.Am.error(e.message)}catch(t){var s,a;b.Am.error((null===(s=t.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||t.message)}finally{setTimeout(()=>{d(!1)},500)}};return(0,a.jsxs)(k.Z,{fullWidth:!0,maxWidth:"sm",open:s,onClose:n,sx:{"& .MuiPaper-root":{maxWidth:480}},children:[(0,a.jsx)(N.Z,{sx:{pb:"0.5rem"},children:"Are you sure you want to delete this user?"}),(0,a.jsx)(W.Z,{children:(0,a.jsx)(U.Z,{children:"Once you delete this user, you cannot revert it again."})}),(0,a.jsxs)(B.Z,{children:[(0,a.jsx)(l.Z,{variant:"contained",color:"primary",disabled:!!i||void 0,startIcon:i&&(0,a.jsx)(E.Z,{color:"inherit",size:16}),sx:{textTransform:"capitalize"},onClick:c,children:"Delete"}),(0,a.jsx)(l.Z,{variant:"contained",color:"error",sx:{textTransform:"capitalize"},onClick:n,children:"Cancel"})]})]})},Y=()=>{let[e,r]=(0,t.useState)(""),[s,f]=(0,t.useState)(1),[j,Z]=(0,t.useState)(0),[C,k]=(0,t.useState)([]),[N,z]=(0,t.useState)(""),[W,S]=(0,t.useState)(!1),[q,A]=(0,t.useState)(!1),[F,_]=(0,t.useState)(!1),[P,B]=(0,t.useState)(!1),[E,T]=(0,t.useState)(!1),[R,D]=(0,t.useState)(!1),I=e=>{let r=(""+e).replace(/\D/g,""),s=r.match(/^(\d{1,4})(\d{3})(\d{3})(\d{4})$/);return s?"+".concat(s[1]," (").concat(s[2],") ").concat(s[3],"-").concat(s[4]):e},L=e=>{switch(e){case"user":default:return"User";case"admin":return"Admin";case"superadmin":return"Super Admin"}},M=(0,t.useCallback)(async()=>{try{let{data:{users:r,totalRows:a}}=await w.Z.get("/users",{params:{search:e,skip:(s-1)*10,limit:10}});k(r),Z(a)}catch(n){var t,o;b.Am.error((null===(t=n.response)||void 0===t?void 0:null===(o=t.data)||void 0===o?void 0:o.message)||n.message)}},[e,s]),U=(e,r)=>{z(e),S(r),_(!0)},Y=e=>{z(e),B(!0)},$=e=>{z(e),T(!0)},G=e=>{z(e),D(!0)};return(0,t.useEffect)(()=>{M()},[M]),(0,a.jsxs)(d.Z,{elevation:0,sx:{border:e=>"1px solid ".concat(e.palette.divider)},children:[(0,a.jsx)(c.Z,{title:"User Management",action:(0,a.jsxs)(o.Z,{sx:{display:"flex",gap:3},children:[(0,a.jsx)(m.Z,{size:"small",placeholder:"Search...",value:e,onChange:e=>r(e.target.value),InputProps:{endAdornment:(0,a.jsx)(u.Z,{position:"end",children:(0,a.jsx)(p.Z,{icon:"ri:search-line"})})}}),(0,a.jsx)(l.Z,{variant:"contained",startIcon:(0,a.jsx)(p.Z,{icon:"mdi:plus"}),sx:{textTransform:"capitalize"},onClick:()=>A(!0),children:"New User"})]}),sx:{display:"flex",flexWrap:"wrap"}}),(0,a.jsxs)(x.Z,{sx:{px:0},children:[(0,a.jsx)(v._,{autoHeight:!0,getRowId:e=>e._id,getRowHeight:e=>"auto",columns:[{flex:1,minWidth:230,field:"name",headerName:"Name",renderCell(e){let{row:r}=e;return(0,a.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,a.jsx)(o.Z,{component:"img",src:r.avatar?"".concat("/uploads","/avatars/").concat(r.avatar):"/images/avatars/avatar.png",sx:{width:45,height:45,objectFit:"contain",borderRadius:5,background:"#F7F7F9",p:.5}}),(0,a.jsxs)(o.Z,{children:[(0,a.jsxs)(n.Z,{children:[r.firstName," ",r.lastName]}),(0,a.jsx)(n.Z,{variant:"caption",children:L(r.role)})]})]})}},{flex:1,minWidth:240,field:"email",headerName:"Email"},{flex:1,minWidth:180,field:"phone",headerName:"Phone",renderCell(e){let{row:r}=e;return I(r.phone)}},{flex:1,minWidth:180,field:"createdAt",headerName:"Joint At",renderCell(e){let{row:r}=e;return y()(r.createdAt).format("YYYY-MM-DD HH:mm:ss")}},{width:150,field:"status",headerName:"Status",renderCell(e){let{row:r}=e;return(0,a.jsx)(g,{size:"small",label:Boolean(r.status)?"Approved":"Disabled",color:Boolean(r.status)?"primary":"error",sx:{width:"100%"}})}},{width:210,field:"action",headerName:"Action",renderCell(e){let{row:r}=e;return(0,a.jsxs)(o.Z,{sx:{display:"flex",gap:3},children:[(0,a.jsx)(i.Z,{title:r.status?"Disable":"Enable",children:(0,a.jsx)(l.Z,{variant:"outlined",color:r.status?"error":"primary",size:"small",sx:{minWidth:36,width:36,height:36,px:"0 !important"},onClick:()=>U(r._id,!Boolean(r.status)),children:(0,a.jsx)(p.Z,{icon:Boolean(r.status)?"mdi:block":"mdi:checkbox-multiple-marked-circle-outline"})})}),(0,a.jsx)(i.Z,{title:"Edit",children:(0,a.jsx)(l.Z,{variant:"outlined",color:"success",size:"small",sx:{minWidth:36,width:36,height:36,px:"0 !important"},onClick:()=>Y(r._id),children:(0,a.jsx)(p.Z,{icon:"bx:edit"})})}),(0,a.jsx)(i.Z,{title:"Change Password",children:(0,a.jsx)(l.Z,{variant:"outlined",color:"info",size:"small",sx:{minWidth:36,width:36,height:36,px:"0 !important"},onClick:()=>$(r._id),children:(0,a.jsx)(p.Z,{icon:"fluent:person-key-24-regular"})})}),(0,a.jsx)(i.Z,{title:"Delete",children:(0,a.jsx)(l.Z,{variant:"outlined",color:"error",size:"small",sx:{minWidth:36,width:36,height:36,px:"0 !important"},onClick:()=>G(r._id),children:(0,a.jsx)(p.Z,{icon:"mdi:delete-outline"})})})]})}}],rows:C,disableColumnMenu:!0,disableColumnSorting:!0,disableMultipleRowSelection:!0,disableRowSelectionOnClick:!0,hideFooter:!0,sx:{"& .MuiDataGrid-cell":{py:"8px !important"},borderBottom:e=>"1px solid ".concat(e.palette.divider)}}),(0,a.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",pt:4},children:(0,a.jsx)(h.Z,{page:s,count:Math.ceil(j/10),variant:"outlined",shape:"rounded",onChange:(e,r)=>f(r)})}),(0,a.jsx)(Q,{open:q,onInit:M,onClose:()=>A(!1)}),(0,a.jsx)(O,{id:N,status:W,open:F,onInit:M,onClose:()=>_(!1)}),(0,a.jsx)(X,{id:N,open:P,onInit:M,onClose:()=>B(!1)}),(0,a.jsx)(H,{id:N,open:E,onClose:()=>T(!1)}),(0,a.jsx)(V,{id:N,open:R,onInit:M,onClose:()=>D(!1)})]})]})};var $=Y}},function(e){e.O(0,[885,976,836,536,957,491,534,200,774,888,179],function(){return e(e.s=77787)}),_N_E=e.O()}]);