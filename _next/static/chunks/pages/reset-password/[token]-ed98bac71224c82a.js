(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{9041:function(e,n,t){"use strict";t.d(n,{Z:function(){return k}});var o,r=t(63366),s=t(87462),i=t(67294),a=t(86010),l=t(94780),d=t(36622),c=t(29630),u=t(82586),p=t(59711),m=t(67074),h=t(1588),f=t(34867);function g(e){return(0,f.Z)("MuiInputAdornment",e)}let x=(0,h.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var w=t(78884),v=t(85893);let Z=["children","className","component","disablePointerEvents","disableTypography","position","variant"],j=(e,n)=>{let{ownerState:t}=e;return[n.root,n[`position${(0,d.Z)(t.position)}`],!0===t.disablePointerEvents&&n.disablePointerEvents,n[t.variant]]},b=e=>{let{classes:n,disablePointerEvents:t,hiddenLabel:o,position:r,size:s,variant:i}=e,a={root:["root",t&&"disablePointerEvents",r&&`position${(0,d.Z)(r)}`,i,o&&"hiddenLabel",s&&`size${(0,d.Z)(s)}`]};return(0,l.Z)(a,g,n)},y=(0,m.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:j})(({theme:e,ownerState:n})=>(0,s.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===n.variant&&{[`&.${x.positionStart}&:not(.${x.hiddenLabel})`]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})),P=i.forwardRef(function(e,n){let t=(0,w.Z)({props:e,name:"MuiInputAdornment"}),{children:l,className:d,component:m="div",disablePointerEvents:h=!1,disableTypography:f=!1,position:g,variant:x}=t,j=(0,r.Z)(t,Z),P=(0,p.Z)()||{},k=x;x&&P.variant,P&&!k&&(k=P.variant);let E=(0,s.Z)({},t,{hiddenLabel:P.hiddenLabel,size:P.size,disablePointerEvents:h,position:g,variant:k}),C=b(E);return(0,v.jsx)(u.Z.Provider,{value:null,children:(0,v.jsx)(y,(0,s.Z)({as:m,ownerState:E,className:(0,a.Z)(C.root,d),ref:n},j,{children:"string"!=typeof l||f?(0,v.jsxs)(i.Fragment,{children:["start"===g?o||(o=(0,v.jsx)("span",{className:"notranslate",children:"â€‹"})):null,l]}):(0,v.jsx)(c.Z,{color:"text.secondary",children:l})}))})});var k=P},76148:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reset-password/[token]",function(){return t(65641)}])},88942:function(e,n,t){"use strict";var o=t(85893),r=t(67074),s=t(61953);let i=(0,r.ZP)(s.Z)(e=>{let{theme:n}=e;return{height:"100vh","& .content-center":{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center",padding:n.spacing(5)},"& .content-right":{display:"flex",minHeight:"100vh",overflowX:"hidden",position:"relative"}}}),a=e=>{let{children:n}=e;return(0,o.jsx)(i,{className:"layout-wrapper",children:(0,o.jsx)(s.Z,{className:"app-content",sx:{minHeight:"100vh",overflowX:"hidden",position:"relative"},children:n})})};n.Z=a},65641:function(e,n,t){"use strict";t.r(n);var o=t(85893),r=t(67294),s=t(11163),i=t(41664),a=t.n(i),l=t(75084),d=t(61953),c=t(67074),u=t(29630),p=t(58316),m=t(39063),h=t(9041),f=t(80562),g=t(21609),x=t(30152),w=t(88942),v=t(74231),Z=t(87536),j=t(47533),b=t(55343),y=t(32631),P=t(70754),k=t(5464),E=t(78065);let C={email:""},S=(0,c.ZP)(d.Z)(e=>{let{theme:n}=e;return{width:450,paddingTop:35,paddingBottom:35,paddingLeft:30,paddingRight:30,background:n.palette.background.paper,[n.breakpoints.down("md")]:{maxWidth:400}}}),_=(0,c.ZP)(u.Z)(e=>{let{theme:n}=e;return{fontWeight:600,letterSpacing:"0.18px",marginBottom:n.spacing(1.5),[n.breakpoints.down("md")]:{marginTop:n.spacing(8)}}}),z=()=>{let e=(0,s.useRouter)(),{token:n}=e.query,[t,i]=(0,r.useState)("/images/logo.svg"),[c,w]=(0,r.useState)(!1),[z,I]=(0,r.useState)(!1),[N,R]=(0,r.useState)(!1),[L,A]=(0,r.useState)(!1),B=v.Ry().shape({password:v.Z_().min(5,"Password must be at least 5 characters long").required("Password is a required field"),confirmation:v.Z_().test("password-match","Password confirmation doesn't matche the password",function(e){return this.parent.password===e}).required("Password confirmation is a required field")}),{control:T,handleSubmit:q,formState:{errors:H}}=(0,Z.cI)({defaultValues:C,mode:"onChange",resolver:(0,j.X)(B)}),M=(0,r.useCallback)(async()=>{if(n){let{data:t}=await k.Z.get("/auth/verify-token/".concat(n));t.status?I(!0):e.push("/login")}},[n,e]),O=async t=>{try{w(!0),delete t.confirmation;let{data:o}=await k.Z.post("/auth/reset-password/".concat(n),t);o.status?(E.Am.success(o.message),setTimeout(()=>{e.push("/login")},1e3)):E.Am.error(o.message)}catch(i){var r,s;E.Am.error((null==i?void 0:null===(r=i.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||i.message)}finally{setTimeout(()=>{w(!1)},500)}};(0,r.useEffect)(()=>{M()},[M]);let W=(0,r.useCallback)(async()=>{let{data:e}=await k.Z.get("/settings");i((null==e?void 0:e.LOGO)?"".concat("/uploads","/logos/").concat(null==e?void 0:e.LOGO):"/images/logo.svg")},[]);return((0,r.useEffect)(()=>{W()},[W]),z)?(0,o.jsx)(d.Z,{sx:{display:"flex",height:"100%",minHeight:"100vh",alignItems:"center",justifyContent:"center",backgroundImage:"url(/images/background.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},children:(0,o.jsxs)(S,{children:[(0,o.jsxs)(d.Z,{component:a(),href:"/",sx:{top:30,left:40,display:"flex",position:"absolute",alignItems:"center",justifyContent:"center",textDecoration:"none"},children:[(0,o.jsx)(d.Z,{component:"img",src:t}),(0,o.jsx)(u.Z,{variant:"h6",sx:{ml:2,lineHeight:1,color:"#fafafa",fontWeight:700,fontSize:"1.5rem !important"},children:x.Z.templateName})]}),(0,o.jsxs)(d.Z,{sx:{mb:6},children:[(0,o.jsx)(_,{variant:"h5",children:"Reset Your Password"}),(0,o.jsx)(u.Z,{variant:"body2",children:"Enter a new password below to change your password."})]}),(0,o.jsxs)(d.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:q(O),children:[(0,o.jsxs)(b.Z,{fullWidth:!0,sx:{mb:4},children:[(0,o.jsx)(p.Z,{size:"small",htmlFor:"password",error:Boolean(H.password),children:"Password"}),(0,o.jsx)(Z.Qr,{name:"password",control:T,rules:{required:!0},render(e){let{field:{value:n,onChange:t,onBlur:r}}=e;return(0,o.jsx)(m.Z,{size:"small",value:n,label:"Password",onBlur:r,onChange:t,id:"password",autoComplete:"new-password",error:Boolean(H.password),type:N?"text":"password",endAdornment:(0,o.jsx)(h.Z,{position:"end",children:(0,o.jsx)(f.Z,{edge:"end",onMouseDown:e=>e.preventDefault(),onClick:()=>R(!N),children:(0,o.jsx)(g.Z,{icon:N?"mdi:eye-outline":"mdi:eye-off-outline"})})})})}}),H.password&&(0,o.jsx)(y.Z,{sx:{color:"error.main"},children:H.password.message})]}),(0,o.jsxs)(b.Z,{fullWidth:!0,sx:{mb:8},children:[(0,o.jsx)(p.Z,{size:"small",htmlFor:"confirmation",error:Boolean(H.confirmation),children:"Re-enter new password"}),(0,o.jsx)(Z.Qr,{name:"confirmation",control:T,rules:{required:!0},render(e){let{field:{value:n,onChange:t,onBlur:r}}=e;return(0,o.jsx)(m.Z,{size:"small",value:n,label:"Re-enter new password",onBlur:r,onChange:t,id:"confirmation",autoComplete:"new-password",error:Boolean(H.confirmation),type:L?"text":"password",endAdornment:(0,o.jsx)(h.Z,{position:"end",children:(0,o.jsx)(f.Z,{edge:"end",onMouseDown:e=>e.preventDefault(),onClick:()=>A(!L),children:(0,o.jsx)(g.Z,{icon:L?"mdi:eye-outline":"mdi:eye-off-outline"})})})})}}),H.confirmation&&(0,o.jsx)(y.Z,{sx:{color:"error.main",mx:.5},children:H.confirmation.message})]}),(0,o.jsx)(l.Z,{fullWidth:!0,type:"submit",variant:"contained",disabled:!!c||void 0,startIcon:c&&(0,o.jsx)(P.Z,{color:"inherit",size:16}),children:"Reset Password"})]})]})}):null};z.guestGuard=!0,z.getLayout=e=>(0,o.jsx)(w.Z,{children:e}),n.default=z}},function(e){e.O(0,[976,536,491,774,888,179],function(){return e(e.s=76148)}),_N_E=e.O()}]);