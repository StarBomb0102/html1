(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[164],{48413:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns",function(){return a(9759)}])},9759:function(e,t,a){"use strict";a.r(t);var i=a(85893),n=a(67294),r=a(11163),s=a(41664),l=a.n(s),c=a(61953),d=a(29630),o=a(21448),u=a(49837),m=a(59742),h=a(14398),p=a(67836),_=a(91359),f=a(65824),g=a(62652),x=a(51514),b=a(50196),y=a(30381),C=a.n(y),w=a(31705);let j=()=>{let e=(0,r.useRouter)(),{settings:t}=(0,x.r)(),{setLoading:a}=(0,w.O)(),[s,y]=(0,n.useState)(null),[j,Z]=(0,n.useState)([]),[v,k]=(0,n.useState)(1),[S,E]=(0,n.useState)([]),T=e=>{switch(e){case void 0:default:return"Using ad set bid strategy";case"LOWEST_COST_WITH_BID_CAP":return"Bid cap";case"LOWEST_COST_WITHOUT_CAP":return"Highest Volumn";case"COST_CAP":return"Cost per result goal"}},O=e=>"0"===e?"Using ad set budget":"$".concat((e/100).toFixed(2)),N=e=>e.split("_").join(" ").toLowerCase(),A=e=>{switch(e){case"ACTIVE":return"success";case"ARCHIVED":return"warning";case"PAUSED":return"secondary";case"DELETED":return"error";default:return"primary"}},D=(0,n.useCallback)(async()=>{try{a(!0);let{data:i}=await b.ZP.get("https://graph.facebook.com/v22.0/me/adaccounts",{params:{fields:"name,account_id",access_token:t.facebookApiKey,limit:1e4}});if(i.data.length){var n;Z(i.data),(null===(n=e.query)||void 0===n?void 0:n.acc_id)?y(i.data.find(t=>t.account_id===e.query.acc_id)):y(i.data[0])}}finally{a(!1)}},[e.query]);(0,n.useEffect)(()=>{D()},[D]);let P=(0,n.useCallback)(async()=>{try{if(a(!0),s){let{data:e}=await b.ZP.get("https://graph.facebook.com/v22.0/".concat(s.id,"/campaigns"),{params:{fields:"name,account_id,bid_strategy,budget_remaining,buying_type,daily_budget,is_budget_schedule_enabled,status,created_time,objective",access_token:t.facebookApiKey,limit:1e5}});e.data&&(E(e.data),k(1))}}finally{a(!1)}},[s]);return(0,n.useEffect)(()=>{P()},[P]),(0,i.jsxs)(u.Z,{elevation:0,sx:{border:e=>"1px solid ".concat(e.palette.divider)},children:[(0,i.jsx)(m.Z,{title:"Campaigns",action:(0,i.jsx)(h.Z,{size:"small",options:j,getOptionLabel:e=>e.name,renderOption:(e,t,a)=>(0,i.jsxs)(c.Z,{...e,sx:{width:"100%",flexDirection:"column",alignItems:"flex-start !important",backgroundColor:a.inputValue==t.name?"f0f0f0":"#ffffff"},children:[(0,i.jsx)(d.Z,{children:t.name}),(0,i.jsx)(d.Z,{variant:"caption",children:t.account_id})]}),renderInput:e=>(0,i.jsx)(p.Z,{size:"small",label:"Accounts",sx:{minWidth:350},...e}),value:s,onChange:(e,t)=>y(t)})}),(0,i.jsxs)(_.Z,{sx:{px:0,minHeight:525},children:[(0,i.jsx)(g._,{autoHeight:!0,getRowId:e=>e.id,getRowHeight:e=>"auto",columns:[{flex:1,minWidth:315,field:"name",headerName:"Name",renderCell(e){let{row:t}=e;return(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(c.Z,{component:l(),href:"/ad-sets?cmp_id=".concat(t.id,"&acc_id=").concat(s.account_id),sx:{display:"block",color:"#001c64",textDecoration:"none"},children:t.name}),(0,i.jsx)(d.Z,{variant:"caption",component:l(),href:"/ad-sets?cmp_id=".concat(t.id,"&acc_id=").concat(s.account_id),children:t.id})]})}},{width:205,field:"bid_strategy",headerName:"Bid Strategy",renderCell(e){let{row:t}=e;return(0,i.jsx)(c.Z,{sx:{display:"block"},children:T(t.bid_strategy)})}},{width:170,field:"budget_remaining",headerName:"Budget",renderCell(e){let{row:t}=e;return(0,i.jsx)(c.Z,{children:O(t.budget_remaining)})}},{width:115,field:"buying_type",headerName:"Buying Type",renderCell(e){let{row:t}=e;return(0,i.jsx)(c.Z,{sx:{textTransform:"capitalize"},children:t.buying_type.toLowerCase()})}},{width:160,field:"objective",headerName:"Objective",renderCell(e){let{row:t}=e;return(0,i.jsx)(c.Z,{sx:{textTransform:"capitalize"},children:N(t.objective)})}},{width:120,field:"status",headerName:"Status",renderCell(e){let{row:t}=e;return(0,i.jsx)(o.Z,{label:t.status,color:A(t.status),size:"small",sx:{width:"100%"}})}},{width:185,field:"created_time",headerName:"Created At",renderCell(e){let{row:t}=e;return(0,i.jsx)(c.Z,{children:C()(t.created_time).format("YYYY-MM-DD HH:mm")})}}],rows:S,disableColumnMenu:!0,disableColumnSorting:!0,disableMultipleRowSelection:!0,disableRowSelectionOnClick:!0,page:v-1,pageSize:10,rowsPerPageOptions:[10],hideFooter:!0,lockColumn:0,sx:{"& .MuiDataGrid-cell":{py:"8px !important"},borderBottom:e=>"1px solid ".concat(e.palette.divider),mb:4}}),(0,i.jsx)(c.Z,{sx:{display:"flex",gap:2,alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(f.Z,{count:Math.ceil(S.length/10),page:v,onChange:(e,t)=>k(t),variant:"outlined",shape:"rounded"})})]})]})};t.default=j}},function(e){e.O(0,[885,976,836,957,774,888,179],function(){return e(e.s=48413)}),_N_E=e.O()}]);