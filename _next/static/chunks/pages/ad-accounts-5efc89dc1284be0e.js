(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{7263:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ad-accounts",function(){return n(15581)}])},15581:function(e,t,n){"use strict";n.r(t);var a=n(85893),r=n(67294),s=n(41664),c=n.n(s),i=n(61953),l=n(29630),d=n(21448),u=n(49837),o=n(59742),m=n(91359),h=n(65824);n(21609);var p=n(62652),f=n(51514),x=n(31705),_=n(50196),g=n(30381),w=n.n(g);let b=()=>{let{settings:e}=(0,f.r)(),{setLoading:t}=(0,x.O)(),[n,s]=(0,r.useState)(1),[g,b]=(0,r.useState)([]),C=e=>{switch(e){case"USD":default:return"$";case"GBP":return"\xa3";case"EUR":return"â‚¬"}},j=e=>{switch(e){case 1:default:return"Active";case 2:return"Disabled";case 3:return"Unsettled";case 7:return"Pending Risk Review";case 8:return"Pending Settlement";case 9:return"In Grace Period";case 100:return"Pending Closure";case 101:return"Closed";case 201:return"Any Active";case 202:return"Any Closed"}},y=e=>{switch(e){case 1:case 201:default:return"success";case 3:case 7:case 8:case 9:case 100:return"warning";case 2:case 101:case 202:return"error"}},N=(0,r.useCallback)(async()=>{try{t(!0);let n={fields:"name,account_id,account_status,age,amount_spent,balance,business,currency,created_time",access_token:e.facebookApiKey,limit:1e5,pretty:1},{data:a}=await _.ZP.get("https://graph.facebook.com/v22.0/me/adaccounts",{params:n});a.data.length&&(b(a.data),s(1))}finally{t(!1)}},[]);return(0,r.useEffect)(()=>{N()},[N]),(0,a.jsxs)(u.Z,{elevation:0,sx:{border:e=>"1px solid ".concat(e.palette.divider)},children:[(0,a.jsx)(o.Z,{title:"Ad Accounts"}),(0,a.jsxs)(m.Z,{sx:{px:0,minHeight:525},children:[(0,a.jsx)(p._,{autoHeight:!0,getRowId:e=>e.id,getRowHeight:e=>"auto",columns:[{flex:1.5,minWidth:300,field:"name",headerName:"Name",renderCell(e){let{row:t}=e;return(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(i.Z,{component:c(),href:"/campaigns?acc_id=".concat(t.account_id),sx:{display:"block",color:"#001c64",textDecoration:"none"},children:t.name}),(0,a.jsx)(l.Z,{variant:"caption",component:c(),href:"/campaigns?acc_id=".concat(t.account_id),children:t.account_id})]})}},{flex:1,minWidth:200,field:"business",headerName:"Business Name",renderCell(e){var t;let{row:n}=e;return(0,a.jsx)(i.Z,{children:null===(t=n.business)||void 0===t?void 0:t.name})}},{width:105,field:"age",headerName:"Age (Days)",renderCell(e){let{row:t}=e;return(0,a.jsx)(i.Z,{children:Math.ceil(t.age)})}},{minWidth:150,field:"amount_spent",headerName:"Spent",renderCell(e){let{row:t}=e;return(0,a.jsxs)(i.Z,{children:[C(t.currency),new Intl.NumberFormat("en-US").format(t.amount_spent/100)]})}},{minWidth:120,field:"balance",renderCell(e){let{row:t}=e;return(0,a.jsxs)(i.Z,{children:[C(t.currency),new Intl.NumberFormat("en-US").format(t.balance/100)]})}},{width:120,field:"account_status",headerName:"Status",renderCell(e){let{row:t}=e;return(0,a.jsx)(d.Z,{label:j(t.account_status),color:y(t.account_status),size:"small",sx:{width:"100%"}})}},{width:185,field:"createdAt",headerName:"Created At",renderCell(e){let{row:t}=e;return(0,a.jsx)(i.Z,{children:w()(t.created_time).format("YYYY-MM-DD HH:mm")})}}],rows:g,disableColumnMenu:!0,disableColumnSorting:!0,disableMultipleRowSelection:!0,disableRowSelectionOnClick:!0,page:n-1,pageSize:10,rowsPerPageOptions:[10],hideFooter:!0,sx:{"& .MuiDataGrid-cell":{py:"8px !important"},borderBottom:e=>"1px solid ".concat(e.palette.divider),mb:4}}),(0,a.jsx)(i.Z,{sx:{display:"flex",gap:2,alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(h.Z,{count:Math.ceil(g.length/10),page:n,onChange:(e,t)=>s(t),variant:"outlined",shape:"rounded"})})]})]})};t.default=b}},function(e){e.O(0,[885,976,836,957,774,888,179],function(){return e(e.s=7263)}),_N_E=e.O()}]);