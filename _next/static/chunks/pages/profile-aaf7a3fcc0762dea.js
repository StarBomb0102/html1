(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{62026:function(e,r,t){"use strict";t.d(r,{Z:function(){return v}});var a=t(63366),s=t(87462),n=t(67294),o=t(86010),i=t(94780),l=t(67074),d=t(78884),c=t(1588),u=t(34867);function m(e){return(0,u.Z)("MuiCardActions",e)}(0,c.Z)("MuiCardActions",["root","spacing"]);var p=t(85893);let f=["disableSpacing","className"],x=e=>{let{classes:r,disableSpacing:t}=e;return(0,i.Z)({root:["root",!t&&"spacing"]},m,r)},h=(0,l.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver(e,r){let{ownerState:t}=e;return[r.root,!t.disableSpacing&&r.spacing]}})(({ownerState:e})=>(0,s.Z)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),Z=n.forwardRef(function(e,r){let t=(0,d.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:n=!1,className:i}=t,l=(0,a.Z)(t,f),c=(0,s.Z)({},t,{disableSpacing:n}),u=x(c);return(0,p.jsx)(h,(0,s.Z)({className:(0,o.Z)(u.root,i),ownerState:c,ref:r},l))});var v=Z},91359:function(e,r,t){"use strict";t.d(r,{Z:function(){return v}});var a=t(87462),s=t(63366),n=t(67294),o=t(86010),i=t(94780),l=t(67074),d=t(78884),c=t(1588),u=t(34867);function m(e){return(0,u.Z)("MuiCardContent",e)}(0,c.Z)("MuiCardContent",["root"]);var p=t(85893);let f=["className","component"],x=e=>{let{classes:r}=e;return(0,i.Z)({root:["root"]},m,r)},h=(0,l.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Z=n.forwardRef(function(e,r){let t=(0,d.Z)({props:e,name:"MuiCardContent"}),{className:n,component:i="div"}=t,l=(0,s.Z)(t,f),c=(0,a.Z)({},t,{component:i}),u=x(c);return(0,p.jsx)(h,(0,a.Z)({as:i,className:(0,o.Z)(u.root,n),ownerState:c,ref:r},l))});var v=Z},59742:function(e,r,t){"use strict";t.d(r,{Z:function(){return y}});var a=t(63366),s=t(87462),n=t(67294),o=t(86010),i=t(94780),l=t(29630),d=t(78884),c=t(67074),u=t(1588),m=t(34867);function p(e){return(0,m.Z)("MuiCardHeader",e)}let f=(0,u.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var x=t(85893);let h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],Z=e=>{let{classes:r}=e;return(0,i.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},p,r)},v=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,r)=>(0,s.Z)({[`& .${f.title}`]:r.title,[`& .${f.subheader}`]:r.subheader},r.root)})({display:"flex",alignItems:"center",padding:16}),j=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,r)=>r.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),g=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,r)=>r.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),b=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,r)=>r.content})({flex:"1 1 auto"}),w=n.forwardRef(function(e,r){let t=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:n,avatar:i,className:c,component:u="div",disableTypography:m=!1,subheader:p,subheaderTypographyProps:f,title:w,titleTypographyProps:y}=t,C=(0,a.Z)(t,h),N=(0,s.Z)({},t,{component:u,disableTypography:m}),P=Z(N),R=w;null==R||R.type===l.Z||m||(R=(0,x.jsx)(l.Z,(0,s.Z)({variant:i?"body2":"h5",className:P.title,component:"span",display:"block"},y,{children:R})));let S=p;return null==S||S.type===l.Z||m||(S=(0,x.jsx)(l.Z,(0,s.Z)({variant:i?"body2":"body1",className:P.subheader,color:"text.secondary",component:"span",display:"block"},f,{children:S}))),(0,x.jsxs)(v,(0,s.Z)({className:(0,o.Z)(P.root,c),as:u,ref:r,ownerState:N},C,{children:[i&&(0,x.jsx)(j,{className:P.avatar,ownerState:N,children:i}),(0,x.jsxs)(b,{className:P.content,ownerState:N,children:[R,S]}),n&&(0,x.jsx)(g,{className:P.action,ownerState:N,children:n})]}))});var y=w},49837:function(e,r,t){"use strict";t.d(r,{Z:function(){return j}});var a=t(87462),s=t(63366),n=t(67294),o=t(86010),i=t(94780),l=t(67074),d=t(78884),c=t(70918),u=t(1588),m=t(34867);function p(e){return(0,m.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var f=t(85893);let x=["className","raised"],h=e=>{let{classes:r}=e;return(0,i.Z)({root:["root"]},p,r)},Z=(0,l.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({overflow:"hidden"})),v=n.forwardRef(function(e,r){let t=(0,d.Z)({props:e,name:"MuiCard"}),{className:n,raised:i=!1}=t,l=(0,s.Z)(t,x),c=(0,a.Z)({},t,{raised:i}),u=h(c);return(0,f.jsx)(Z,(0,a.Z)({className:(0,o.Z)(u.root,n),elevation:i?8:void 0,ref:r,ownerState:c},l))});var j=v},23235:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(52417)}])},4776:function(e,r,t){"use strict";var a=t(85893),s=t(67294),n=t(61953),o=t(75084);let i=e=>{let{value:r,error:t,width:i=100,height:l=100,onChange:d}=e,c=(0,s.useRef)(null),u=e=>{d(e.target.files[0])},m=()=>{d("")};return(0,a.jsx)(n.Z,{sx:{width:i,height:l},children:(0,a.jsxs)(n.Z,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:1,overflow:"hidden",border:e=>"1px solid ".concat(t?e.palette.error.main:e.palette.divider),"&:hover .actions":{opacity:1}},children:[(0,a.jsx)(n.Z,{component:"img",src:r?r instanceof File?URL.createObjectURL(r):"".concat("/uploads","/avatars/").concat(r):"/images/avatars/avatar.png",alt:"Photo",sx:{width:i,height:l,objectFit:"cover"}}),(0,a.jsxs)(n.Z,{className:"actions",sx:{position:"absolute",background:"#0000007a",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:2,alignItems:"center",justifyContent:"center",opacity:0,transition:"all .3s ease"},children:[(0,a.jsx)(o.Z,{variant:"outlined",size:"small",color:"primary",onClick:()=>c.current.click(),sx:{color:"#ffffff",borderColor:"#ffffff",textTransform:"capitalize","&:hover":{borderColor:"#fafafa"}},children:"Browse"}),r&&(0,a.jsx)(o.Z,{variant:"outlined",size:"small",color:"error",onClick:m,sx:{color:"#ffffff",borderColor:"#ffffff",textTransform:"capitalize","&:hover":{borderColor:"#fafafa"}},children:"Remove"}),(0,a.jsx)(n.Z,{component:"input",type:"file",ref:c,accept:"image/*",sx:{display:"none"},onChange:u})]})]})})};r.Z=i},52417:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return I}});var a=t(85893),s=t(79072),n=t(67294),o=t(17288),i=t(49837),l=t(59742),d=t(91359),c=t(61953),u=t(55343),m=t(67836),p=t(32631),f=t(9041),x=t(62026),h=t(75084),Z=t(70754),v=t(21609),j=t(87536),g=t(74231),b=t(47533),w=t(5464),y=t(78065),C=t(4776),N=t(67555),P=t.n(N);t(58530);let R={avatar:"",firstName:"",lastName:"",email:"",phone:""},S=()=>{let[e,r]=(0,n.useState)(!1),{user:t,setUser:N}=(0,o.a)(),S=g.Ry().shape({firstName:g.Z_().required("First name is required"),lastName:g.Z_().required("Last name is required"),email:g.Z_().email("Email is invalid").required("Email is required"),phone:g.Z_().matches(/^\+?[1-9]\d{1,14}$/,"Phone number must be valid").required("Phone number is required")}),{control:M,reset:_,handleSubmit:A,formState:{errors:z}}=(0,j.cI)({defaultValues:R,mode:"onChange",resolver:(0,b.X)(S)}),q=async e=>{try{r(!0);let t=new FormData;t.append("firstName",e.firstName),t.append("lastName",e.lastName),t.append("email",e.email),t.append("phone",e.phone),e.avatar instanceof File&&t.append("avatar",e.avatar);let{data:a}=await w.Z.put("/profile/account",t);a.status?(y.Am.success(a.message),N(a.user),window.localStorage.setItem("user",JSON.stringify(a.user))):y.Am.error(a.message)}catch(o){var s,n;y.Am.error((null===(s=o.response)||void 0===s?void 0:null===(n=s.data)||void 0===n?void 0:n.message)||o.message)}finally{setTimeout(()=>{r(!1)},500)}};return(0,n.useEffect)(()=>{_({avatar:null==t?void 0:t.avatar,firstName:null==t?void 0:t.firstName,lastName:null==t?void 0:t.lastName,email:null==t?void 0:t.email,phone:null==t?void 0:t.phone})},[]),(0,a.jsxs)(i.Z,{component:"form",elevation:0,sx:{border:e=>"1px solid ".concat(e.palette.divider)},onSubmit:A(q),children:[(0,a.jsx)(l.Z,{title:"Profile Settings"}),(0,a.jsx)(d.Z,{children:(0,a.jsxs)(c.Z,{sx:{display:"flex",alignItems:"flex-start",gap:4},children:[(0,a.jsx)(j.Qr,{name:"avatar",control:M,render(e){let{field:{value:r,onChange:t}}=e;return(0,a.jsx)(C.Z,{width:150,height:150,value:r,onChange:t})}}),(0,a.jsxs)(s.ZP,{container:!0,spacing:4,children:[(0,a.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,a.jsxs)(u.Z,{fullWidth:!0,children:[(0,a.jsx)(j.Qr,{name:"firstName",control:M,render(e){let{field:{value:r,onChange:t}}=e;return(0,a.jsx)(m.Z,{size:"small",autoFocus:!0,value:r,label:"First Name",onChange:t,placeholder:"",error:Boolean(z.firstName)})}}),z.firstName&&(0,a.jsx)(p.Z,{sx:{color:"error.main",mx:1},children:z.firstName.message})]})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,a.jsxs)(u.Z,{fullWidth:!0,children:[(0,a.jsx)(j.Qr,{name:"lastName",control:M,render(e){let{field:{value:r,onChange:t}}=e;return(0,a.jsx)(m.Z,{size:"small",value:r,label:"Last Name",onChange:t,error:Boolean(z.lastName)})}}),z.lastName&&(0,a.jsx)(p.Z,{sx:{color:"error.main",mx:1},children:z.lastName.message})]})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,children:(0,a.jsxs)(u.Z,{fullWidth:!0,children:[(0,a.jsx)(j.Qr,{name:"email",control:M,rules:{required:!0},render(e){let{field:{value:r,onChange:t}}=e;return(0,a.jsx)(m.Z,{size:"small",value:r,label:"Email",autoComplete:"email",InputProps:{startAdornment:(0,a.jsx)(f.Z,{position:"start",children:(0,a.jsx)(v.Z,{icon:"mdi:envelope"})})},onChange:t,error:Boolean(z.email)})}}),z.email&&(0,a.jsx)(p.Z,{sx:{color:"error.main",mx:1},children:z.email.message})]})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,children:(0,a.jsxs)(u.Z,{fullWidth:!0,children:[(0,a.jsx)(j.Qr,{name:"phone",control:M,render(e){let{field:{value:r,onChange:t}}=e;return(0,a.jsx)(P(),{country:"us",specialLabel:"Phone",value:r,onChange:e=>t(e),inputStyle:{width:"100%",padding:"9.5px 14px 9.5px 58px",borderRadius:"8px",borderColor:Boolean(z.phone)&&"#FF4D49"}})}}),z.phone&&(0,a.jsx)(p.Z,{sx:{color:"error.main",mx:1},children:z.phone.message})]})})]})]})}),(0,a.jsx)(x.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,a.jsx)(h.Z,{variant:"contained",sx:{textTransform:"capitalize"},type:"submit",disabled:!!e||void 0,startIcon:e&&(0,a.jsx)(Z.Z,{color:"inherit",size:16}),children:"Update"})})]})};var M=t(80562),_=t(24180);let A={password:"",confirmation:""},z=()=>{let[e,r]=(0,n.useState)(!1),[t,s]=(0,n.useState)(!1),[o,Z]=(0,n.useState)(!1),C=g.Ry().shape({password:g.Z_().min(5,"Password must be at least 5 characters long").required("Password is required"),confirmation:g.Z_().test("password-match","Password confirmation doesn't matche the password",function(e){return this.parent.password===e}).required("Password confirmation is a required field")}),{control:N,watch:P,reset:R,handleSubmit:S,formState:{errors:z}}=(0,j.cI)({defaultValues:A,mode:"onChange",resolver:(0,b.X)(C)}),q=async e=>{try{r(!0);let{data:t}=await w.Z.put("/profile/credential",{password:e.password});t.status?(y.Am.success(t.message),R(A)):y.Am.error(t.message)}catch(n){var a,s;y.Am.error((null===(a=n.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||n.message)}finally{setTimeout(()=>{r(!1)},500)}};return(0,n.useEffect)(()=>{R(A)},[]),(0,a.jsxs)(i.Z,{component:"form",elevation:0,sx:{border:e=>"1px solid ".concat(e.palette.divider)},onSubmit:S(q),children:[(0,a.jsx)(l.Z,{title:"Credential Settings"}),(0,a.jsxs)(d.Z,{children:[(0,a.jsxs)(u.Z,{fullWidth:!0,sx:{mb:5.5},children:[(0,a.jsx)(j.Qr,{name:"password",control:N,render(e){let{field:{value:r,onChange:s}}=e;return(0,a.jsx)(m.Z,{label:"Password",size:"small",type:t?"text":"password",value:r,onChange:s,error:Boolean(z.password),InputProps:{startAdornment:(0,a.jsx)(f.Z,{position:"start",children:(0,a.jsx)(v.Z,{icon:"mdi:password-outline"})}),endAdornment:(0,a.jsx)(f.Z,{position:"end",children:(0,a.jsx)(M.Z,{size:"small",children:(0,a.jsx)(v.Z,{icon:"mdi:eye-outline"})})})}})}}),(0,a.jsxs)(c.Z,{sx:{px:.5,position:"relative"},children:[(0,a.jsx)(_.Z,{password:P("password"),className:"password-strength-bar"}),z.password&&(0,a.jsx)(p.Z,{sx:{position:"absolute",top:12,color:"error.main",mx:.5},children:z.password.message})]})]}),(0,a.jsx)(u.Z,{fullWidth:!0,sx:{mb:5.5},children:(0,a.jsx)(j.Qr,{name:"confirmation",control:N,render(e){let{field:{value:r,onChange:t}}=e;return(0,a.jsx)(m.Z,{label:"Re-type password",size:"small",type:o?"text":"password",value:r,onChange:t,InputProps:{startAdornment:(0,a.jsx)(f.Z,{position:"start",children:(0,a.jsx)(v.Z,{icon:"mdi:password-check-outline"})}),endAdornment:(0,a.jsx)(f.Z,{position:"end",children:(0,a.jsx)(M.Z,{size:"small",children:(0,a.jsx)(v.Z,{icon:"mdi:eye-outline"})})})}})}})})]}),(0,a.jsx)(x.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,a.jsx)(h.Z,{variant:"contained",sx:{textTransform:"capitalize"},type:"submit",disabled:!!e||void 0,children:"Update"})})]})},q=()=>(0,a.jsxs)(s.ZP,{container:!0,spacing:5,children:[(0,a.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(S,{})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(z,{})})]});var I=q}},function(e){e.O(0,[440,976,836,536,491,72,200,774,888,179],function(){return e(e.s=23235)}),_N_E=e.O()}]);